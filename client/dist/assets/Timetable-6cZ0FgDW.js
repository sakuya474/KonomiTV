import{u as Ce}from"./TimetableStore-CJ05fx-n.js";import{s as ne,q as p,x as Me,y as he,z as ae,A as De,C as Ve,B as ue,D as Ee,E as Be,G as $e,H as Pe,I as Re,J as He,K as Fe,L as ye,N as pe,O as Ie,Q as Le,S as Ne,T as Ye,W as Oe,X as q,Y as ze,Z as We,$ as Xe,a0 as Ae,a1 as qe,a2 as Ge,a3 as je,a4 as Ue,a5 as Ze,a6 as Je,a7 as Ke,a8 as Qe,a as s,a9 as ce,aa as et,ab as tt,F as N,ac as ge,d as at,ad as nt,ae as ot,c as _,b as v,f as K,g as W,h as m,V as Q,af as U,ag as lt,ah as oe,l as H,t as T,k as ee,e as A,o as i,n as st,_ as rt}from"./index-Cat5FXVK.js";import{R as we}from"./Reservations-Cf59hQQT.js";import{B as it}from"./Breadcrumbs-DVGoHgpu.js";import{H as ut,N as ct}from"./Navigation-BpVD7k_u.js";import{S as dt}from"./SPHeaderBar-C5kvxg0u.js";import{V as vt,a as ft,b as mt,c as gt}from"./VMenu-BdgALB6N.js";import{u as ht,m as _t,a as bt}from"./dialog-transition-CobOhznJ.js";import{u as yt}from"./ssrBoot-TBrTBosi.js";import{V as pt}from"./VAvatar-DZjadIb6.js";import{V as wt,a as kt,b as ke,c as Tt,d as St}from"./VCard-DMfFDPZS.js";import{V as me}from"./VChip-CC0_c7wt.js";import{V as Dt}from"./VDivider-CdoWY63E.js";import{V as xt}from"./VSpacer-BUU6498a.js";import{V as Ct}from"./VTooltip-B0suMaZT.js";import"./index-DRcH6Sky.js";import"./transition-3mmQQU9L.js";import"./forwardRefs-DboJVnh3.js";function Mt(t){let{rootEl:l,isSticky:b,layoutItemStyles:I}=t;const o=ne(!1),y=ne(0),u=p(()=>{const $=typeof o.value=="boolean"?"top":o.value;return[b.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[$]:Me(y.value)}:{top:I.value.top}]});he(()=>{ae(b,$=>{$?window.addEventListener("scroll",F,{passive:!0}):window.removeEventListener("scroll",F)},{immediate:!0})}),De(()=>{window.removeEventListener("scroll",F)});let S=0;function F(){const $=S>window.scrollY?"up":"down",D=l.value.getBoundingClientRect(),w=parseFloat(I.value.top??0),k=window.scrollY-Math.max(0,y.value-w),x=D.height+Math.max(y.value,w)-window.scrollY-window.innerHeight,E=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;D.height<window.innerHeight-w?(o.value="top",y.value=w):$==="up"&&o.value==="bottom"||$==="down"&&o.value==="top"?(y.value=window.scrollY+D.top-E,o.value=!0):$==="down"&&x<=0?(y.value=0,o.value="bottom"):$==="up"&&k<=0&&(E?o.value!=="top"&&(y.value=-k+E+w,o.value="top"):(y.value=D.top+k,o.value="top")),S=window.scrollY}return{isStuck:o,stickyStyles:u}}const Vt=100,Et=20;function Te(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function Se(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let l=0;for(let b=t.length-1;b>0;b--){if(t[b].t===t[b-1].t)continue;const I=Te(l),o=(t[b].d-t[b-1].d)/(t[b].t-t[b-1].t);l+=(o-I)*Math.abs(o),b===t.length-1&&(l*=.5)}return Te(l)*1e3}function Bt(){const t={};function l(o){Array.from(o.changedTouches).forEach(y=>{(t[y.identifier]??(t[y.identifier]=new Ve(Et))).push([o.timeStamp,y])})}function b(o){Array.from(o.changedTouches).forEach(y=>{delete t[y.identifier]})}function I(o){var $;const y=($=t[o])==null?void 0:$.values().reverse();if(!y)throw new Error(`No samples for touch id ${o}`);const u=y[0],S=[],F=[];for(const D of y){if(u[0]-D[0]>Vt)break;S.push({t:D[0],d:D[1].clientX}),F.push({t:D[0],d:D[1].clientY})}return{x:Se(S),y:Se(F),get direction(){const{x:D,y:w}=this,[k,x]=[Math.abs(D),Math.abs(w)];return k>x&&D>=0?"right":k>x&&D<=0?"left":x>k&&w>=0?"down":x>k&&w<=0?"up":$t()}}}return{addMovement:l,endTouch:b,getVelocity:I}}function $t(){throw new Error}function Pt(t){let{el:l,isActive:b,isTemporary:I,width:o,touchless:y,position:u}=t;he(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",z,{passive:!1}),window.addEventListener("touchend",Z,{passive:!0})}),De(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",z),window.removeEventListener("touchend",Z)});const S=p(()=>["left","right"].includes(u.value)),{addMovement:F,endTouch:$,getVelocity:D}=Bt();let w=!1;const k=ne(!1),x=ne(0),E=ne(0);let P;function X(c,f){return(u.value==="left"?c:u.value==="right"?document.documentElement.clientWidth-c:u.value==="top"?c:u.value==="bottom"?document.documentElement.clientHeight-c:te())-(f?o.value:0)}function G(c){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=u.value==="left"?(c-E.value)/o.value:u.value==="right"?(document.documentElement.clientWidth-c-E.value)/o.value:u.value==="top"?(c-E.value)/o.value:u.value==="bottom"?(document.documentElement.clientHeight-c-E.value)/o.value:te();return f?Math.max(0,Math.min(1,g)):g}function O(c){if(y.value)return;const f=c.changedTouches[0].clientX,g=c.changedTouches[0].clientY,h=25,V=u.value==="left"?f<h:u.value==="right"?f>document.documentElement.clientWidth-h:u.value==="top"?g<h:u.value==="bottom"?g>document.documentElement.clientHeight-h:te(),C=b.value&&(u.value==="left"?f<o.value:u.value==="right"?f>document.documentElement.clientWidth-o.value:u.value==="top"?g<o.value:u.value==="bottom"?g>document.documentElement.clientHeight-o.value:te());(V||C||b.value&&I.value)&&(P=[f,g],E.value=X(S.value?f:g,b.value),x.value=G(S.value?f:g),w=E.value>-20&&E.value<80,$(c),F(c))}function z(c){const f=c.changedTouches[0].clientX,g=c.changedTouches[0].clientY;if(w){if(!c.cancelable){w=!1;return}const V=Math.abs(f-P[0]),C=Math.abs(g-P[1]);(S.value?V>C&&V>3:C>V&&C>3)?(k.value=!0,w=!1):(S.value?C:V)>3&&(w=!1)}if(!k.value)return;c.preventDefault(),F(c);const h=G(S.value?f:g,!1);x.value=Math.max(0,Math.min(1,h)),h>1?E.value=X(S.value?f:g,!0):h<0&&(E.value=X(S.value?f:g,!1))}function Z(c){if(w=!1,!k.value)return;F(c),k.value=!1;const f=D(c.changedTouches[0].identifier),g=Math.abs(f.x),h=Math.abs(f.y);(S.value?g>h&&g>400:h>g&&h>3)?b.value=f.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||te()):b.value=x.value>.5}const B=p(()=>k.value?{transform:u.value==="left"?`translateX(calc(-100% + ${x.value*o.value}px))`:u.value==="right"?`translateX(calc(100% - ${x.value*o.value}px))`:u.value==="top"?`translateY(calc(-100% + ${x.value*o.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${x.value*o.value}px))`:te(),transition:"none"}:void 0);return ue(k,()=>{var g,h;const c=((g=l.value)==null?void 0:g.style.transform)??null,f=((h=l.value)==null?void 0:h.style.transition)??null;Ee(()=>{var V,C,L,M;(C=l.value)==null||C.style.setProperty("transform",((V=B.value)==null?void 0:V.transform)||"none"),(M=l.value)==null||M.style.setProperty("transition",((L=B.value)==null?void 0:L.transition)||null)}),Be(()=>{var V,C;(V=l.value)==null||V.style.setProperty("transform",c),(C=l.value)==null||C.style.setProperty("transition",f)})}),{isDragging:k,dragProgress:x,dragStyles:B}}function te(){throw new Error}const Rt=["start","end","left","right","top","bottom"],Ht=Pe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Rt.includes(t)},sticky:Boolean,...Qe(),...Ke(),..._t(),...Je({mobile:null}),...Ze(),...Ue(),...je(),...Ge({tag:"nav"}),...qe()},"VNavigationDrawer"),Ft=$e()({name:"VNavigationDrawer",props:Ht(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,l){let{attrs:b,emit:I,slots:o}=l;const{isRtl:y}=Re(),{themeClasses:u}=He(t),{borderClasses:S}=Fe(t),{backgroundColorClasses:F,backgroundColorStyles:$}=ye(pe(t,"color")),{elevationClasses:D}=Ie(t),{displayClasses:w,mobile:k}=Le(t),{roundedClasses:x}=Ne(t),E=Ye(),P=Oe(t,"modelValue",null,a=>!!a),{ssrBootStyles:X}=yt(),{scopeId:G}=ht(),O=q(),z=ne(!1),{runOpenDelay:Z,runCloseDelay:B}=bt(t,a=>{z.value=a}),c=p(()=>t.rail&&t.expandOnHover&&z.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),f=p(()=>ze(t.location,y.value)),g=p(()=>t.persistent),h=p(()=>!t.permanent&&(k.value||t.temporary)),V=p(()=>t.sticky&&!h.value&&f.value!=="bottom");ue(()=>t.expandOnHover&&t.rail!=null,()=>{ae(z,a=>I("update:rail",!a))}),ue(()=>!t.disableResizeWatcher,()=>{ae(h,a=>!t.permanent&&ge(()=>P.value=!a))}),ue(()=>!t.disableRouteWatcher&&!!E,()=>{ae(E.currentRoute,()=>h.value&&(P.value=!1))}),ae(()=>t.permanent,a=>{a&&(P.value=!0)}),t.modelValue==null&&!h.value&&(P.value=t.permanent||!k.value);const{isDragging:C,dragProgress:L}=Pt({el:O,isActive:P,isTemporary:h,width:c,touchless:pe(t,"touchless"),position:f}),M=p(()=>{const a=h.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):c.value;return C.value?a*L.value:a}),{layoutItemStyles:le,layoutItemScrimStyles:se}=We({id:t.name,order:p(()=>parseInt(t.order,10)),position:f,layoutSize:M,elementSize:c,active:p(()=>P.value||C.value),disableTransitions:p(()=>C.value),absolute:p(()=>t.absolute||V.value&&typeof J.value!="string")}),{isStuck:J,stickyStyles:de}=Mt({rootEl:O,isSticky:V,layoutItemStyles:le}),re=ye(p(()=>typeof t.scrim=="string"?t.scrim:null)),ie=p(()=>({...C.value?{opacity:L.value*.2,transition:"none"}:void 0,...se.value}));return Xe({VList:{bgColor:"transparent"}}),Ae(()=>{const a=o.image||t.image;return s(N,null,[s(t.tag,ce({ref:O,onMouseenter:Z,onMouseleave:B,class:["v-navigation-drawer",`v-navigation-drawer--${f.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":z.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":h.value,"v-navigation-drawer--persistent":g.value,"v-navigation-drawer--active":P.value,"v-navigation-drawer--sticky":V.value},u.value,F.value,S.value,w.value,D.value,x.value,t.class],style:[$.value,le.value,X.value,de.value,t.style]},G,b),{default:()=>{var e,n,d;return[a&&s("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?s(et,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},o.image):s(pt,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),o.prepend&&s("div",{class:"v-navigation-drawer__prepend"},[(e=o.prepend)==null?void 0:e.call(o)]),s("div",{class:"v-navigation-drawer__content"},[(n=o.default)==null?void 0:n.call(o)]),o.append&&s("div",{class:"v-navigation-drawer__append"},[(d=o.append)==null?void 0:d.call(o)])]}}),s(tt,{name:"fade-transition"},{default:()=>[h.value&&(C.value||P.value)&&!!t.scrim&&s("div",ce({class:["v-navigation-drawer__scrim",re.backgroundColorClasses.value],style:[ie.value,re.backgroundColorStyles.value],onClick:()=>{g.value||(P.value=!1)}},G),null)]})])}),{isStuck:J}}}),It={class:"route-container"},Lt={class:"timetable-container-wrapper"},Nt={class:"timetable-breadcrumbs-container"},Yt={class:"timetable-header"},Ot={class:"channels-tab"},zt={class:"timetable-header__date-control"},Wt={class:"timetable-body"},Xt={key:0,class:"loading-container"},At={key:1,class:"timetable-grid-container"},qt={class:"timeline-container"},Gt={key:0,class:"day-text"},jt={key:1,class:"dayofweek-text"},Ut={class:"hour-text"},Zt=["onClick"],Jt={class:"program-header"},Kt={class:"program-title"},Qt={class:"program-badges"},ea={key:0,class:"program-badge program-badge--paid"},ta={key:1,class:"program-badge program-badge--genre"},aa={key:0,class:"program-description"},na={class:"program-time"},oa={class:"tooltip-text"},la={key:2,class:"loading-container"},sa={class:"program-info-badges"},ra={class:"text-body-2 mb-3"},ia={key:0,class:"program-detail-section"},ua={class:"program-detail-grid"},ca={class:"detail-key"},da={class:"detail-value"},va=at({__name:"Timetable",setup(t){const l=Ce(),b=nt(),I=q(new Set),o=[{id:"ALL",name:"すべて"},{id:"GR",name:"地デジ"},{id:"BS",name:"BS"},{id:"CS",name:"CS"}],y=q(1),u=(a,e)=>{l.setChannelType(a),y.value=e},S=q(!1),F=p(()=>{const a=new Date;a.setHours(0,0,0,0);const e=new Date(a);return e.setDate(e.getDate()+l.selected_day_offset),e}),$=p(()=>{const a=new Date;a.setHours(0,0,0,0);const e=[];for(let n=-7;n<=7;n++){const d=new Date(a);d.setDate(d.getDate()+n);const r=d.getMonth()+1,R=d.getDate(),Y=n===0?`${r}/${R} 今日`:`${r}/${R}`;e.push({label:Y,value:d.toISOString(),offset:n})}return e}),D=a=>{const e=a.getMonth()+1,n=a.getDate();return`${e}/${n}`},w=async a=>{const e=l.selected_day_offset+a;e>=-7&&e<=7&&(l.selected_day_offset=e,await l.fetchTimetable(),x())},k=async a=>{l.selected_day_offset=a,await l.fetchTimetable(),x(),S.value=!1},x=()=>{ge(()=>{setTimeout(()=>{const a=document.querySelector(".timetable-grid-container");if(!a||B.value.totalMinutes===0)return;const n=24*60*6;a.scrollTo({top:n,behavior:"smooth"})},100)})},E={"ニュース・報道":{background:"#5a88a7",text:"#ffffff"},スポーツ:{background:"#e07f5a",text:"#ffffff"},"情報・ワイドショー":{background:"#e7a355",text:"#ffffff"},ドラマ:{background:"#b464a8",text:"#ffffff"},音楽:{background:"#64b46e",text:"#ffffff"},バラエティ:{background:"#e05a8e",text:"#ffffff"},映画:{background:"#a7647e",text:"#ffffff"},"アニメ・特撮":{background:"#e76b55",text:"#ffffff"},"ドキュメンタリー・教養":{background:"#5a88a7",text:"#ffffff"},"劇場・公演":{background:"#a7647e",text:"#ffffff"},"趣味・教育":{background:"#64b46e",text:"#ffffff"},福祉:{background:"#5aa788",text:"#ffffff"},その他:{background:"#7f7f7f",text:"#ffffff"}},P={background:"rgb(var(--v-theme-background-lighten-3))",text:"rgb(var(--v-theme-text))"},X=q(new Date),G=setInterval(()=>{X.value=new Date},60*1e3);ot(()=>{clearInterval(G)});const O=a=>{const e=new Date(a);return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},z=a=>{const e=new Date(a);return`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()} ${O(a)}`},Z=(a,e)=>a.length<=e?a:a.substring(0,e)+"...",B=p(()=>{const a=l.timetable_channels;if(!a||a.length===0)return{startTime:new Date,endTime:new Date,totalMinutes:0};let e=null,n=null;if(a.forEach(r=>{r.channel.type!=="GR"&&r.programs.forEach(R=>{const Y=new Date(R.start_time),j=new Date(R.end_time);(!e||Y<e)&&(e=Y),(!n||j>n)&&(n=j)})}),(!e||!n)&&a.forEach(r=>{r.programs.forEach(R=>{const Y=new Date(R.start_time),j=new Date(R.end_time);(!e||Y<e)&&(e=Y),(!n||j>n)&&(n=j)})}),!e||!n)return{startTime:new Date,endTime:new Date,totalMinutes:0};const d=Math.floor((n.getTime()-e.getTime())/(1e3*60));return{startTime:e,endTime:n,totalMinutes:d}}),c=p(()=>{if(B.value.totalMinutes===0)return[];const a=[],e=new Date(B.value.startTime),n=new Date(B.value.endTime);let d=new Date(e);for(d.setMinutes(0,0,0);d<=n;){const r=d.getHours(),R=r===0;a.push({hour:r,day:R?d.getDate():null}),d.setHours(d.getHours()+1)}return a}),f=p(()=>{var e;const a=((e=l.timetable_channels)==null?void 0:e.length)||0;return a===0?{"grid-template-columns":"none"}:{"grid-template-columns":`repeat(${a}, minmax(200px, 1fr))`}}),g=p(()=>{var e;const a=((e=l.timetable_channels)==null?void 0:e.length)||0;return a===0?{"grid-template-columns":"none","grid-template-rows":"none"}:{"grid-template-columns":`repeat(${a}, minmax(200px, 1fr))`,"grid-template-rows":`repeat(${B.value.totalMinutes}, 6px)`}}),h=(a,e)=>{var _e,be;const n=new Date(a.start_time),d=new Date(a.end_time),r=B.value.startTime,R=(_e=l.timetable_channels)==null?void 0:_e[e];R&&R.channel.type==="GR"&&(n.setMinutes(n.getMinutes()+15),d.setMinutes(d.getMinutes()+15));const Y=Math.floor((n.getTime()-r.getTime())/(1e3*60)),j=a.duration/60,xe=((be=a.genres[0])==null?void 0:be.major)||"その他",ve=E[xe]||P,fe={"grid-column":e+1,"grid-row-start":Y+1,"grid-row-end":Y+j+1,"background-color":ve.background,color:ve.text,"border-color":ve.background};return I.value.has(a.id)&&(fe.border="2px dashed #FFFFFF",fe["border-color"]="#FFFFFF"),fe},V=p(()=>{if(B.value.totalMinutes===0)return{top:"0px"};const a=B.value.startTime,e=new Date(X.value),n=Math.floor((e.getTime()-a.getTime())/(1e3*60));return n<0||n>B.value.totalMinutes?{top:"-9999px"}:{top:`${n*6}px`}}),C=a=>a.duration/60>15,L=q(!1),M=q(null),le=a=>{M.value=a,L.value=!0},se=async()=>{const a=await we.fetchReservations();a&&(I.value=new Set(a.reservations.map(e=>e.program.id)))},J=q(!1),de=async a=>{J.value=!0;const e={is_enabled:!0,priority:3,recording_folders:[],recording_start_margin:null,recording_end_margin:null,recording_mode:"SpecifiedService",caption_recording_mode:"Default",data_broadcasting_recording_mode:"Default",post_recording_mode:"Default",post_recording_bat_file_path:null,is_event_relay_follow_enabled:!0,is_exact_recording_enabled:!1,is_oneseg_separate_output_enabled:!1,is_sequential_recording_in_single_file_enabled:!1,forced_tuner_id:null};await we.addReservation(a,e)?(b.show("success","録画予約を追加しました。"),L.value=!1,await se()):b.show("error","録画予約の追加に失敗しました。"),J.value=!1};he(async()=>{l.setChannelType("GR"),l.current_date=new Date,l.selected_day_offset=0,await Promise.all([l.fetchTimetable(),se()])});const re=()=>{ge(()=>{setTimeout(()=>{const a=document.querySelector(".timetable-grid-container");if(!a||B.value.totalMinutes===0)return;const e=B.value.startTime,n=new Date(X.value),r=Math.floor((n.getTime()-e.getTime())/(1e3*60))*6-200;a.scrollTo({top:r>0?r:0,behavior:"smooth"})},100)})},ie=q(!0);return ae(()=>l.timetable_channels,a=>{ie.value&&a&&a.length>0&&(re(),ie.value=!1)}),(a,e)=>(i(),_("div",It,[s(ut),v("main",null,[s(ct),v("div",Lt,[s(dt),v("div",Nt,[s(it,{crumbs:[{name:"ホーム",path:"/"},{name:"番組表",path:"/timetable/",disabled:!0}]})]),v("div",Yt,[v("div",Ot,[v("div",{class:"channels-tab__buttons",style:K({"--tab-length":o.length,"--active-tab-index":y.value})},[(i(),_(N,null,W(o,(n,d)=>s(Q,{variant:"flat",class:"channels-tab__button",key:n.id,onClick:r=>u(n.id,d)},{default:m(()=>[H(T(n.name),1)]),_:2},1032,["onClick"])),64)),e[6]||(e[6]=v("div",{class:"channels-tab__highlight"},null,-1))],4)]),v("div",zt,[s(Q,{variant:"flat",icon:"",onClick:e[0]||(e[0]=n=>w(-1))},{default:m(()=>[s(oe,null,{default:m(()=>[...e[7]||(e[7]=[H("mdi-chevron-left",-1)])]),_:1})]),_:1}),s(vt,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=n=>S.value=n),"close-on-content-click":!1},{activator:m(({props:n})=>[s(Q,ce({variant:"flat"},n,{class:"date-button"}),{default:m(()=>[H(T(D(F.value)),1)]),_:1},16)]),default:m(()=>[s(ft,{class:"date-list"},{default:m(()=>[(i(!0),_(N,null,W($.value,n=>(i(),ee(mt,{key:n.value,onClick:d=>k(n.offset),class:st({"date-list-item--selected":n.offset===U(l).selected_day_offset})},{default:m(()=>[s(gt,null,{default:m(()=>[H(T(n.label),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(Q,{variant:"flat",icon:"",onClick:e[2]||(e[2]=n=>w(1))},{default:m(()=>[s(oe,null,{default:m(()=>[...e[8]||(e[8]=[H("mdi-chevron-right",-1)])]),_:1})]),_:1})])]),v("div",Wt,[U(l).is_loading?(i(),_("div",Xt,[s(lt,{indeterminate:"",size:"64"})])):U(l).timetable_channels&&U(l).timetable_channels.length>0?(i(),_("div",At,[e[10]||(e[10]=v("div",{class:"corner-cell"},null,-1)),v("div",{class:"channels-header",style:K(f.value)},[(i(!0),_(N,null,W(U(l).timetable_channels,n=>(i(),_("div",{key:n.channel.id,class:"channel-header-cell"},T(n.channel.name),1))),128))],4),v("div",qt,[(i(!0),_(N,null,W(c.value,(n,d)=>(i(),_("div",{key:d,class:"hour-label"},[n.day!==null?(i(),_("div",Gt,T(n.day),1)):A("",!0),n.day!==null?(i(),_("div",jt,"日")):A("",!0),v("div",Ut,T(n.hour),1),e[9]||(e[9]=v("div",{class:"hour-unit"},"時",-1))]))),128))]),v("div",{class:"programs-grid",style:K(g.value)},[v("div",{class:"current-time-line",style:K(V.value)},null,4),(i(!0),_(N,null,W(U(l).timetable_channels.length,n=>(i(),_("div",{key:n,class:"channel-border",style:K({gridColumn:n})},null,4))),128)),(i(!0),_(N,null,W(Math.ceil(B.value.totalMinutes/60),n=>(i(),_("div",{key:n,class:"hour-border",style:K({gridRow:n*60+1})},null,4))),128)),(i(!0),_(N,null,W(U(l).timetable_channels,(n,d)=>(i(),_(N,null,[(i(!0),_(N,null,W(n.programs,r=>(i(),ee(Ct,{key:r.id,location:"top",disabled:C(r)},{activator:m(({props:R})=>[v("div",ce({ref_for:!0},R,{class:"program-cell elevation-2",style:h(r,d),onClick:Y=>le(r)}),[v("div",Jt,[v("div",Kt,T(r.title),1),v("div",Qt,[r.is_free?A("",!0):(i(),_("span",ea,"有料")),r.genres.length>0?(i(),_("span",ta,T(r.genres[0].major),1)):A("",!0)])]),r.description&&r.duration>=900?(i(),_("div",aa,T(Z(r.description,50)),1)):A("",!0),v("div",na,T(O(r.start_time))+" - "+T(O(r.end_time))+" ("+T(Math.floor(r.duration/60))+"分)",1)],16,Zt)]),default:m(()=>[v("span",oa,T(r.title),1)]),_:2},1032,["disabled"]))),128))],64))),256))],4)])):(i(),_("div",la,[...e[11]||(e[11]=[v("p",null,"番組情報を取得できませんでした。",-1),v("p",null,"指定された期間・チャンネルに放送される番組がありません。",-1)])]))])])]),s(Ft,{modelValue:L.value,"onUpdate:modelValue":e[5]||(e[5]=n=>L.value=n),location:"right",temporary:"",width:"600"},{default:m(()=>[M.value?(i(),ee(St,{key:0,class:"detail-panel"},{default:m(()=>[s(wt,{class:"text-h5 pb-2"},{default:m(()=>[H(T(M.value.title),1)]),_:1}),s(kt,{class:"pb-3"},{default:m(()=>[H(T(z(M.value.start_time))+" - "+T(z(M.value.end_time))+" ("+T(Math.floor(M.value.duration/60))+"分)",1)]),_:1}),s(ke,{class:"pt-0 pb-2"},{default:m(()=>[v("div",sa,[M.value.is_free?A("",!0):(i(),ee(me,{key:0,color:"warning",size:"small",class:"mr-2 mb-2"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[12]||(e[12]=[H("mdi-currency-yen",-1)])]),_:1}),e[13]||(e[13]=H(" 有料放送 ",-1))]),_:1})),M.value.video_resolution==="1080i"||M.value.video_resolution==="1080p"?(i(),ee(me,{key:1,color:"success",size:"small",class:"mr-2 mb-2"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[14]||(e[14]=[H("mdi-high-definition",-1)])]),_:1}),e[15]||(e[15]=H(" HD ",-1))]),_:1})):A("",!0),(i(!0),_(N,null,W(M.value.genres.slice(0,2),n=>(i(),ee(me,{key:n.major,color:"primary",variant:"outlined",size:"small",class:"mr-2 mb-2"},{default:m(()=>[H(T(n.major),1)]),_:2},1024))),128))])]),_:1}),s(ke,{class:"py-2"},{default:m(()=>[s(Dt,{class:"mb-3"}),e[17]||(e[17]=v("h4",{class:"text-subtitle-1 mb-2"},"番組内容",-1)),v("p",ra,T(M.value.description),1),M.value.detail&&Object.keys(M.value.detail).length>0?(i(),_("div",ia,[e[16]||(e[16]=v("h4",{class:"text-subtitle-1 mb-2"},"詳細情報",-1)),v("div",ua,[(i(!0),_(N,null,W(M.value.detail,(n,d)=>(i(),_("div",{key:d,class:"detail-item"},[v("span",ca,T(d)+":",1),v("span",da,T(n),1)]))),128))])])):A("",!0)]),_:1}),s(Tt,{class:"detail-panel__actions"},{default:m(()=>[s(xt),s(Q,{loading:J.value,onClick:e[3]||(e[3]=n=>de(M.value.id)),color:"primary",variant:"elevated"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[18]||(e[18]=[H("mdi-record-rec",-1)])]),_:1}),e[19]||(e[19]=H(" 録画予約 ",-1))]),_:1},8,["loading"]),s(Q,{onClick:e[4]||(e[4]=n=>L.value=!1),variant:"outlined"},{default:m(()=>[...e[20]||(e[20]=[H("閉じる",-1)])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1},8,["modelValue"])]))}}),Ba=rt(va,[["__scopeId","data-v-34590965"]]);export{Ba as default};
