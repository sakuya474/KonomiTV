import{u as Se}from"./TimetableStore-3XemETDV.js";import{s as ne,q as p,x as De,y as ge,z as ae,A as Te,C as xe,B as ue,D as Ce,E as Ve,G as Me,H as Ee,I as Be,J as $e,K as Pe,L as _e,N as be,O as He,Q as Re,S as Fe,T as Ie,W as Le,X as A,Y as Ne,Z as Ye,$ as Oe,a0 as ze,a1 as We,a2 as Xe,a3 as Ae,a4 as qe,a5 as je,a6 as Ue,a7 as Ge,a8 as Ze,a as s,a9 as ce,aa as Je,ab as Ke,F as L,ac as me,d as Qe,ad as et,ae as tt,c as _,b as c,f as K,g as z,h as m,V as Q,af as U,ag as at,l as H,t as T,ah as oe,k as ee,n as nt,e as X,o as r,_ as ot}from"./index-B6MhHmJL.js";import{R as ye}from"./Reservations-CxhbGYDf.js";import{B as lt}from"./Breadcrumbs-I0gqi2vU.js";import{H as st,N as rt}from"./Navigation-KATsUvOU.js";import{S as it}from"./SPHeaderBar-B581i4_8.js";import{V as ut,a as ct,b as dt,c as vt}from"./VMenu-ojPYjP3A.js";import{u as ft,m as mt,a as gt}from"./dialog-transition-BzZpqG0j.js";import{u as ht}from"./ssrBoot-D3LRGXTC.js";import{V as _t}from"./VAvatar-CD2pGN7O.js";import{V as bt}from"./VTooltip-D2QDVQu4.js";import{V as yt,a as pt,b as pe,c as wt,d as kt}from"./VCard-DmawnG9V.js";import{V as fe}from"./VChip-OHaF1nPF.js";import{V as Tt}from"./VDivider-lE38P8og.js";import{V as St}from"./VSpacer-DHK-tvZJ.js";import"./index-ltd8fe3M.js";import"./transition-CrK7IR13.js";import"./forwardRefs-DboJVnh3.js";function Dt(t){let{rootEl:l,isSticky:b,layoutItemStyles:F}=t;const o=ne(!1),y=ne(0),i=p(()=>{const $=typeof o.value=="boolean"?"top":o.value;return[b.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[$]:De(y.value)}:{top:F.value.top}]});ge(()=>{ae(b,$=>{$?window.addEventListener("scroll",R,{passive:!0}):window.removeEventListener("scroll",R)},{immediate:!0})}),Te(()=>{window.removeEventListener("scroll",R)});let S=0;function R(){const $=S>window.scrollY?"up":"down",D=l.value.getBoundingClientRect(),w=parseFloat(F.value.top??0),k=window.scrollY-Math.max(0,y.value-w),x=D.height+Math.max(y.value,w)-window.scrollY-window.innerHeight,E=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;D.height<window.innerHeight-w?(o.value="top",y.value=w):$==="up"&&o.value==="bottom"||$==="down"&&o.value==="top"?(y.value=window.scrollY+D.top-E,o.value=!0):$==="down"&&x<=0?(y.value=0,o.value="bottom"):$==="up"&&k<=0&&(E?o.value!=="top"&&(y.value=-k+E+w,o.value="top"):(y.value=D.top+k,o.value="top")),S=window.scrollY}return{isStuck:o,stickyStyles:i}}const xt=100,Ct=20;function we(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function ke(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let l=0;for(let b=t.length-1;b>0;b--){if(t[b].t===t[b-1].t)continue;const F=we(l),o=(t[b].d-t[b-1].d)/(t[b].t-t[b-1].t);l+=(o-F)*Math.abs(o),b===t.length-1&&(l*=.5)}return we(l)*1e3}function Vt(){const t={};function l(o){Array.from(o.changedTouches).forEach(y=>{(t[y.identifier]??(t[y.identifier]=new xe(Ct))).push([o.timeStamp,y])})}function b(o){Array.from(o.changedTouches).forEach(y=>{delete t[y.identifier]})}function F(o){var $;const y=($=t[o])==null?void 0:$.values().reverse();if(!y)throw new Error(`No samples for touch id ${o}`);const i=y[0],S=[],R=[];for(const D of y){if(i[0]-D[0]>xt)break;S.push({t:D[0],d:D[1].clientX}),R.push({t:D[0],d:D[1].clientY})}return{x:ke(S),y:ke(R),get direction(){const{x:D,y:w}=this,[k,x]=[Math.abs(D),Math.abs(w)];return k>x&&D>=0?"right":k>x&&D<=0?"left":x>k&&w>=0?"down":x>k&&w<=0?"up":Mt()}}}return{addMovement:l,endTouch:b,getVelocity:F}}function Mt(){throw new Error}function Et(t){let{el:l,isActive:b,isTemporary:F,width:o,touchless:y,position:i}=t;ge(()=>{window.addEventListener("touchstart",Y,{passive:!0}),window.addEventListener("touchmove",O,{passive:!1}),window.addEventListener("touchend",G,{passive:!0})}),Te(()=>{window.removeEventListener("touchstart",Y),window.removeEventListener("touchmove",O),window.removeEventListener("touchend",G)});const S=p(()=>["left","right"].includes(i.value)),{addMovement:R,endTouch:$,getVelocity:D}=Vt();let w=!1;const k=ne(!1),x=ne(0),E=ne(0);let P;function W(u,f){return(i.value==="left"?u:i.value==="right"?document.documentElement.clientWidth-u:i.value==="top"?u:i.value==="bottom"?document.documentElement.clientHeight-u:te())-(f?o.value:0)}function q(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=i.value==="left"?(u-E.value)/o.value:i.value==="right"?(document.documentElement.clientWidth-u-E.value)/o.value:i.value==="top"?(u-E.value)/o.value:i.value==="bottom"?(document.documentElement.clientHeight-u-E.value)/o.value:te();return f?Math.max(0,Math.min(1,g)):g}function Y(u){if(y.value)return;const f=u.changedTouches[0].clientX,g=u.changedTouches[0].clientY,h=25,M=i.value==="left"?f<h:i.value==="right"?f>document.documentElement.clientWidth-h:i.value==="top"?g<h:i.value==="bottom"?g>document.documentElement.clientHeight-h:te(),C=b.value&&(i.value==="left"?f<o.value:i.value==="right"?f>document.documentElement.clientWidth-o.value:i.value==="top"?g<o.value:i.value==="bottom"?g>document.documentElement.clientHeight-o.value:te());(M||C||b.value&&F.value)&&(P=[f,g],E.value=W(S.value?f:g,b.value),x.value=q(S.value?f:g),w=E.value>-20&&E.value<80,$(u),R(u))}function O(u){const f=u.changedTouches[0].clientX,g=u.changedTouches[0].clientY;if(w){if(!u.cancelable){w=!1;return}const M=Math.abs(f-P[0]),C=Math.abs(g-P[1]);(S.value?M>C&&M>3:C>M&&C>3)?(k.value=!0,w=!1):(S.value?C:M)>3&&(w=!1)}if(!k.value)return;u.preventDefault(),R(u);const h=q(S.value?f:g,!1);x.value=Math.max(0,Math.min(1,h)),h>1?E.value=W(S.value?f:g,!0):h<0&&(E.value=W(S.value?f:g,!1))}function G(u){if(w=!1,!k.value)return;R(u),k.value=!1;const f=D(u.changedTouches[0].identifier),g=Math.abs(f.x),h=Math.abs(f.y);(S.value?g>h&&g>400:h>g&&h>3)?b.value=f.direction===({left:"right",right:"left",top:"down",bottom:"up"}[i.value]||te()):b.value=x.value>.5}const B=p(()=>k.value?{transform:i.value==="left"?`translateX(calc(-100% + ${x.value*o.value}px))`:i.value==="right"?`translateX(calc(100% - ${x.value*o.value}px))`:i.value==="top"?`translateY(calc(-100% + ${x.value*o.value}px))`:i.value==="bottom"?`translateY(calc(100% - ${x.value*o.value}px))`:te(),transition:"none"}:void 0);return ue(k,()=>{var g,h;const u=((g=l.value)==null?void 0:g.style.transform)??null,f=((h=l.value)==null?void 0:h.style.transition)??null;Ce(()=>{var M,C,I,V;(C=l.value)==null||C.style.setProperty("transform",((M=B.value)==null?void 0:M.transform)||"none"),(V=l.value)==null||V.style.setProperty("transition",((I=B.value)==null?void 0:I.transition)||null)}),Ve(()=>{var M,C;(M=l.value)==null||M.style.setProperty("transform",u),(C=l.value)==null||C.style.setProperty("transition",f)})}),{isDragging:k,dragProgress:x,dragStyles:B}}function te(){throw new Error}const Bt=["start","end","left","right","top","bottom"],$t=Ee({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Bt.includes(t)},sticky:Boolean,...Ze(),...Ge(),...mt(),...Ue({mobile:null}),...je(),...qe(),...Ae(),...Xe({tag:"nav"}),...We()},"VNavigationDrawer"),Pt=Me()({name:"VNavigationDrawer",props:$t(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,l){let{attrs:b,emit:F,slots:o}=l;const{isRtl:y}=Be(),{themeClasses:i}=$e(t),{borderClasses:S}=Pe(t),{backgroundColorClasses:R,backgroundColorStyles:$}=_e(be(t,"color")),{elevationClasses:D}=He(t),{displayClasses:w,mobile:k}=Re(t),{roundedClasses:x}=Fe(t),E=Ie(),P=Le(t,"modelValue",null,a=>!!a),{ssrBootStyles:W}=ht(),{scopeId:q}=ft(),Y=A(),O=ne(!1),{runOpenDelay:G,runCloseDelay:B}=gt(t,a=>{O.value=a}),u=p(()=>t.rail&&t.expandOnHover&&O.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),f=p(()=>Ne(t.location,y.value)),g=p(()=>t.persistent),h=p(()=>!t.permanent&&(k.value||t.temporary)),M=p(()=>t.sticky&&!h.value&&f.value!=="bottom");ue(()=>t.expandOnHover&&t.rail!=null,()=>{ae(O,a=>F("update:rail",!a))}),ue(()=>!t.disableResizeWatcher,()=>{ae(h,a=>!t.permanent&&me(()=>P.value=!a))}),ue(()=>!t.disableRouteWatcher&&!!E,()=>{ae(E.currentRoute,()=>h.value&&(P.value=!1))}),ae(()=>t.permanent,a=>{a&&(P.value=!0)}),t.modelValue==null&&!h.value&&(P.value=t.permanent||!k.value);const{isDragging:C,dragProgress:I}=Et({el:Y,isActive:P,isTemporary:h,width:u,touchless:be(t,"touchless"),position:f}),V=p(()=>{const a=h.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):u.value;return C.value?a*I.value:a}),{layoutItemStyles:le,layoutItemScrimStyles:se}=Ye({id:t.name,order:p(()=>parseInt(t.order,10)),position:f,layoutSize:V,elementSize:u,active:p(()=>P.value||C.value),disableTransitions:p(()=>C.value),absolute:p(()=>t.absolute||M.value&&typeof Z.value!="string")}),{isStuck:Z,stickyStyles:de}=Dt({rootEl:Y,isSticky:M,layoutItemStyles:le}),re=_e(p(()=>typeof t.scrim=="string"?t.scrim:null)),ie=p(()=>({...C.value?{opacity:I.value*.2,transition:"none"}:void 0,...se.value}));return Oe({VList:{bgColor:"transparent"}}),ze(()=>{const a=o.image||t.image;return s(L,null,[s(t.tag,ce({ref:Y,onMouseenter:G,onMouseleave:B,class:["v-navigation-drawer",`v-navigation-drawer--${f.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":O.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":h.value,"v-navigation-drawer--persistent":g.value,"v-navigation-drawer--active":P.value,"v-navigation-drawer--sticky":M.value},i.value,R.value,S.value,w.value,D.value,x.value,t.class],style:[$.value,le.value,W.value,de.value,t.style]},q,b),{default:()=>{var e,n,d;return[a&&s("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?s(Je,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},o.image):s(_t,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),o.prepend&&s("div",{class:"v-navigation-drawer__prepend"},[(e=o.prepend)==null?void 0:e.call(o)]),s("div",{class:"v-navigation-drawer__content"},[(n=o.default)==null?void 0:n.call(o)]),o.append&&s("div",{class:"v-navigation-drawer__append"},[(d=o.append)==null?void 0:d.call(o)])]}}),s(Ke,{name:"fade-transition"},{default:()=>[h.value&&(C.value||P.value)&&!!t.scrim&&s("div",ce({class:["v-navigation-drawer__scrim",re.backgroundColorClasses.value],style:[ie.value,re.backgroundColorStyles.value],onClick:()=>{g.value||(P.value=!1)}},q),null)]})])}),{isStuck:Z}}}),Ht={class:"route-container"},Rt={class:"timetable-container-wrapper"},Ft={class:"timetable-breadcrumbs-container"},It={class:"timetable-header"},Lt={class:"channels-tab"},Nt={class:"timetable-header__date-control"},Yt={class:"timetable-body"},Ot={key:0,class:"loading-container"},zt={key:1,class:"timetable-grid-container"},Wt={class:"timeline-container"},Xt={key:0,class:"day-text"},At={key:1,class:"dayofweek-text"},qt={class:"hour-text"},jt=["onClick"],Ut={class:"program-header"},Gt={class:"program-title"},Zt={class:"program-badges"},Jt={key:0,class:"program-badge program-badge--paid"},Kt={key:1,class:"program-badge program-badge--genre"},Qt={key:0,class:"program-description"},ea={class:"program-time"},ta={class:"tooltip-text"},aa={key:2,class:"loading-container"},na={class:"program-info-badges"},oa={class:"text-body-2 mb-3"},la={key:0,class:"program-detail-section"},sa={class:"program-detail-grid"},ra={class:"detail-key"},ia={class:"detail-value"},ua=Qe({__name:"Timetable",setup(t){const l=Se(),b=et(),F=A(new Set),o=[{id:"ALL",name:"すべて"},{id:"GR",name:"地デジ"},{id:"BS",name:"BS"},{id:"CS",name:"CS"}],y=A(1),i=(a,e)=>{l.setChannelType(a),y.value=e},S=A(!1),R=p(()=>{const a=new Date;a.setHours(0,0,0,0);const e=new Date(a);return e.setDate(e.getDate()+l.selected_day_offset),e}),$=p(()=>{const a=new Date;a.setHours(0,0,0,0);const e=[];for(let n=-7;n<=7;n++){const d=new Date(a);d.setDate(d.getDate()+n);const v=d.getMonth()+1,N=d.getDate(),j=n===0?`${v}/${N} 今日`:`${v}/${N}`;e.push({label:j,value:d.toISOString(),offset:n})}return e}),D=a=>{const e=a.getMonth()+1,n=a.getDate();return`${e}/${n}`},w=async a=>{const e=l.selected_day_offset+a;e>=-7&&e<=7&&(l.selected_day_offset=e,await l.fetchTimetable(),x())},k=async a=>{l.selected_day_offset=a,await l.fetchTimetable(),x(),S.value=!1},x=()=>{me(()=>{setTimeout(()=>{const a=document.querySelector(".timetable-grid-container");if(!a||B.value.totalMinutes===0)return;const n=24*60*6;a.scrollTo({top:n,behavior:"smooth"})},100)})},E={"ニュース・報道":{background:"#5a88a7",text:"#ffffff"},スポーツ:{background:"#e07f5a",text:"#ffffff"},"情報・ワイドショー":{background:"#e7a355",text:"#ffffff"},ドラマ:{background:"#b464a8",text:"#ffffff"},音楽:{background:"#64b46e",text:"#ffffff"},バラエティ:{background:"#e05a8e",text:"#ffffff"},映画:{background:"#a7647e",text:"#ffffff"},"アニメ・特撮":{background:"#e76b55",text:"#ffffff"},"ドキュメンタリー・教養":{background:"#5a88a7",text:"#ffffff"},"劇場・公演":{background:"#a7647e",text:"#ffffff"},"趣味・教育":{background:"#64b46e",text:"#ffffff"},福祉:{background:"#5aa788",text:"#ffffff"},その他:{background:"#7f7f7f",text:"#ffffff"}},P={background:"rgb(var(--v-theme-background-lighten-3))",text:"rgb(var(--v-theme-text))"},W=A(new Date),q=setInterval(()=>{W.value=new Date},60*1e3);tt(()=>{clearInterval(q)});const Y=a=>{const e=new Date(a);return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},O=a=>{const e=new Date(a);return`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()} ${Y(a)}`},G=(a,e)=>a.length<=e?a:a.substring(0,e)+"...",B=p(()=>{const a=l.timetable_channels;if(!a||a.length===0)return{startTime:new Date,endTime:new Date,totalMinutes:0};let e=null,n=null;if(a.forEach(v=>{v.programs.forEach(N=>{const j=new Date(N.start_time),J=new Date(N.end_time);(!e||j<e)&&(e=j),(!n||J>n)&&(n=J)})}),!e||!n)return{startTime:new Date,endTime:new Date,totalMinutes:0};const d=Math.floor((n.getTime()-e.getTime())/(1e3*60));return{startTime:e,endTime:n,totalMinutes:d}}),u=p(()=>{if(B.value.totalMinutes===0)return[];const a=[],e=new Date(B.value.startTime),n=new Date(B.value.endTime);let d=new Date(e);for(d.setMinutes(0,0,0);d<=n;){const v=d.getHours(),N=v===0;a.push({hour:v,day:N?d.getDate():null}),d.setHours(d.getHours()+1)}return a}),f=p(()=>{var e;const a=((e=l.timetable_channels)==null?void 0:e.length)||0;return a===0?{"grid-template-columns":"none"}:{"grid-template-columns":`repeat(${a}, minmax(200px, 1fr))`}}),g=p(()=>{var e;const a=((e=l.timetable_channels)==null?void 0:e.length)||0;return a===0?{"grid-template-columns":"none","grid-template-rows":"none"}:{"grid-template-columns":`repeat(${a}, minmax(200px, 1fr))`,"grid-template-rows":`repeat(${B.value.totalMinutes}, 6px)`}}),h=(a,e)=>{var he;const n=new Date(a.start_time);new Date(a.end_time);const d=B.value.startTime,v=Math.floor((n.getTime()-d.getTime())/(1e3*60)),N=a.duration/60,j=((he=a.genres[0])==null?void 0:he.major)||"その他",J=E[j]||P,ve={"grid-column":e+1,"grid-row-start":v+1,"grid-row-end":v+N+1,"background-color":J.background,color:J.text,"border-color":J.background};return F.value.has(a.id)&&(ve.border="2px dashed #FFFFFF",ve["border-color"]="#FFFFFF"),ve},M=p(()=>{if(B.value.totalMinutes===0)return{top:"0px"};const a=B.value.startTime,e=new Date(W.value),n=Math.floor((e.getTime()-a.getTime())/(1e3*60));return n<0||n>B.value.totalMinutes?{top:"-9999px"}:{top:`${n*6}px`}}),C=a=>a.duration/60>15,I=A(!1),V=A(null),le=a=>{V.value=a,I.value=!0},se=async()=>{const a=await ye.fetchReservations();a&&(F.value=new Set(a.reservations.map(e=>e.program.id)))},Z=A(!1),de=async a=>{Z.value=!0;const e={is_enabled:!0,priority:3,recording_folders:[],recording_start_margin:null,recording_end_margin:null,recording_mode:"SpecifiedService",caption_recording_mode:"Default",data_broadcasting_recording_mode:"Default",post_recording_mode:"Default",post_recording_bat_file_path:null,is_event_relay_follow_enabled:!0,is_exact_recording_enabled:!1,is_oneseg_separate_output_enabled:!1,is_sequential_recording_in_single_file_enabled:!1,forced_tuner_id:null};await ye.addReservation(a,e)?(b.show("success","録画予約を追加しました。"),I.value=!1,await se()):b.show("error","録画予約の追加に失敗しました。"),Z.value=!1};ge(async()=>{l.setChannelType("GR"),l.current_date=new Date,l.selected_day_offset=0,await Promise.all([l.fetchTimetable(),se()])});const re=()=>{me(()=>{setTimeout(()=>{const a=document.querySelector(".timetable-grid-container");if(!a||B.value.totalMinutes===0)return;const e=B.value.startTime,n=new Date(W.value),v=Math.floor((n.getTime()-e.getTime())/(1e3*60))*6-200;a.scrollTo({top:v>0?v:0,behavior:"smooth"})},100)})},ie=A(!0);return ae(()=>l.timetable_channels,a=>{ie.value&&a&&a.length>0&&(re(),ie.value=!1)}),(a,e)=>(r(),_("div",Ht,[s(st),c("main",null,[s(rt),c("div",Rt,[s(it),c("div",Ft,[s(lt,{crumbs:[{name:"ホーム",path:"/"},{name:"番組表",path:"/timetable/",disabled:!0}]})]),c("div",It,[c("div",Lt,[c("div",{class:"channels-tab__buttons",style:K({"--tab-length":o.length,"--active-tab-index":y.value})},[(r(),_(L,null,z(o,(n,d)=>s(Q,{variant:"flat",class:"channels-tab__button",key:n.id,onClick:v=>i(n.id,d)},{default:m(()=>[H(T(n.name),1)]),_:2},1032,["onClick"])),64)),e[6]||(e[6]=c("div",{class:"channels-tab__highlight"},null,-1))],4)]),c("div",Nt,[s(Q,{variant:"flat",icon:"",onClick:e[0]||(e[0]=n=>w(-1))},{default:m(()=>[s(oe,null,{default:m(()=>[...e[7]||(e[7]=[H("mdi-chevron-left",-1)])]),_:1})]),_:1}),s(ut,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=n=>S.value=n),"close-on-content-click":!1},{activator:m(({props:n})=>[s(Q,ce({variant:"flat"},n,{class:"date-button"}),{default:m(()=>[H(T(D(R.value)),1)]),_:1},16)]),default:m(()=>[s(ct,{class:"date-list"},{default:m(()=>[(r(!0),_(L,null,z($.value,n=>(r(),ee(vt,{key:n.value,onClick:d=>k(n.offset),class:nt({"date-list-item--selected":n.offset===U(l).selected_day_offset})},{default:m(()=>[s(dt,null,{default:m(()=>[H(T(n.label),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(Q,{variant:"flat",icon:"",onClick:e[2]||(e[2]=n=>w(1))},{default:m(()=>[s(oe,null,{default:m(()=>[...e[8]||(e[8]=[H("mdi-chevron-right",-1)])]),_:1})]),_:1})])]),c("div",Yt,[U(l).is_loading?(r(),_("div",Ot,[s(at,{indeterminate:"",size:"64"})])):U(l).timetable_channels&&U(l).timetable_channels.length>0?(r(),_("div",zt,[e[10]||(e[10]=c("div",{class:"corner-cell"},null,-1)),c("div",{class:"channels-header",style:K(f.value)},[(r(!0),_(L,null,z(U(l).timetable_channels,n=>(r(),_("div",{key:n.channel.id,class:"channel-header-cell"},T(n.channel.name),1))),128))],4),c("div",Wt,[(r(!0),_(L,null,z(u.value,(n,d)=>(r(),_("div",{key:d,class:"hour-label"},[n.day!==null?(r(),_("div",Xt,T(n.day),1)):X("",!0),n.day!==null?(r(),_("div",At,"日")):X("",!0),c("div",qt,T(n.hour),1),e[9]||(e[9]=c("div",{class:"hour-unit"},"時",-1))]))),128))]),c("div",{class:"programs-grid",style:K(g.value)},[c("div",{class:"current-time-line",style:K(M.value)},null,4),(r(!0),_(L,null,z(U(l).timetable_channels.length,n=>(r(),_("div",{key:n,class:"channel-border",style:K({gridColumn:n})},null,4))),128)),(r(!0),_(L,null,z(Math.ceil(B.value.totalMinutes/60),n=>(r(),_("div",{key:n,class:"hour-border",style:K({gridRow:n*60+1})},null,4))),128)),(r(!0),_(L,null,z(U(l).timetable_channels,(n,d)=>(r(),_(L,null,[(r(!0),_(L,null,z(n.programs,v=>(r(),ee(bt,{key:v.id,location:"top",disabled:C(v)},{activator:m(({props:N})=>[c("div",ce({ref_for:!0},N,{class:"program-cell elevation-2",style:h(v,d),onClick:j=>le(v)}),[c("div",Ut,[c("div",Gt,T(v.title),1),c("div",Zt,[v.is_free?X("",!0):(r(),_("span",Jt,"有料")),v.genres.length>0?(r(),_("span",Kt,T(v.genres[0].major),1)):X("",!0)])]),v.description&&v.duration>=900?(r(),_("div",Qt,T(G(v.description,50)),1)):X("",!0),c("div",ea,T(Y(v.start_time))+" - "+T(Y(v.end_time))+" ("+T(Math.floor(v.duration/60))+"分)",1)],16,jt)]),default:m(()=>[c("span",ta,T(v.title),1)]),_:2},1032,["disabled"]))),128))],64))),256))],4)])):(r(),_("div",aa,[...e[11]||(e[11]=[c("p",null,"番組情報を取得できませんでした。",-1),c("p",null,"指定された期間・チャンネルに放送される番組がありません。",-1)])]))])])]),s(Pt,{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=n=>I.value=n),location:"right",temporary:"",width:"600"},{default:m(()=>[V.value?(r(),ee(kt,{key:0,class:"detail-panel"},{default:m(()=>[s(yt,{class:"text-h5 pb-2"},{default:m(()=>[H(T(V.value.title),1)]),_:1}),s(pt,{class:"pb-3"},{default:m(()=>[H(T(O(V.value.start_time))+" - "+T(O(V.value.end_time))+" ("+T(Math.floor(V.value.duration/60))+"分)",1)]),_:1}),s(pe,{class:"pt-0 pb-2"},{default:m(()=>[c("div",na,[V.value.is_free?X("",!0):(r(),ee(fe,{key:0,color:"warning",size:"small",class:"mr-2 mb-2"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[12]||(e[12]=[H("mdi-currency-yen",-1)])]),_:1}),e[13]||(e[13]=H(" 有料放送 ",-1))]),_:1})),V.value.video_resolution==="1080i"||V.value.video_resolution==="1080p"?(r(),ee(fe,{key:1,color:"success",size:"small",class:"mr-2 mb-2"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[14]||(e[14]=[H("mdi-high-definition",-1)])]),_:1}),e[15]||(e[15]=H(" HD ",-1))]),_:1})):X("",!0),(r(!0),_(L,null,z(V.value.genres.slice(0,2),n=>(r(),ee(fe,{key:n.major,color:"primary",variant:"outlined",size:"small",class:"mr-2 mb-2"},{default:m(()=>[H(T(n.major),1)]),_:2},1024))),128))])]),_:1}),s(pe,{class:"py-2"},{default:m(()=>[s(Tt,{class:"mb-3"}),e[17]||(e[17]=c("h4",{class:"text-subtitle-1 mb-2"},"番組内容",-1)),c("p",oa,T(V.value.description),1),V.value.detail&&Object.keys(V.value.detail).length>0?(r(),_("div",la,[e[16]||(e[16]=c("h4",{class:"text-subtitle-1 mb-2"},"詳細情報",-1)),c("div",sa,[(r(!0),_(L,null,z(V.value.detail,(n,d)=>(r(),_("div",{key:d,class:"detail-item"},[c("span",ra,T(d)+":",1),c("span",ia,T(n),1)]))),128))])])):X("",!0)]),_:1}),s(wt,{class:"detail-panel__actions"},{default:m(()=>[s(St),s(Q,{loading:Z.value,onClick:e[3]||(e[3]=n=>de(V.value.id)),color:"primary",variant:"elevated"},{default:m(()=>[s(oe,{start:""},{default:m(()=>[...e[18]||(e[18]=[H("mdi-record-rec",-1)])]),_:1}),e[19]||(e[19]=H(" 録画予約 ",-1))]),_:1},8,["loading"]),s(Q,{onClick:e[4]||(e[4]=n=>I.value=!1),variant:"outlined"},{default:m(()=>[...e[20]||(e[20]=[H("閉じる",-1)])]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1},8,["modelValue"])]))}}),Va=ot(ua,[["__scopeId","data-v-da93e940"]]);export{Va as default};
