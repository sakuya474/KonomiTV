import{d1 as l,X as a,ai as t}from"./index-l7mZcvr7.js";import{B as o}from"./BDLibrary-CgdH6yrr.js";const D=l("bdLibraryHistory",()=>{const n=a([]),y=a([]),c=a(!1),i=async()=>{if(t().is_logged_in)try{c.value=!0;const r=await o.fetchBDHistoryList();n.value=r,y.value=r}catch(r){console.error("BDライブラリ視聴履歴の取得に失敗しました:",r)}finally{c.value=!1}};return{history_list:n,history_items:y,is_loading:c,fetchHistoryList:i,addHistory:async(e,r,s)=>{if(t().is_logged_in&&!(isNaN(r)||isNaN(s)||r<0||s<=0))try{await o.addBDHistory(e.id,r,s)&&await i()}catch(u){console.error("BDライブラリ視聴履歴の追加に失敗しました:",u)}},removeHistory:async e=>{if(t().is_logged_in)try{const s=await o.removeBDHistory(e)}catch(s){console.error("BDライブラリ視聴履歴の削除に失敗しました:",s)}},clearHistory:async()=>{if(t().is_logged_in)try{await o.clearBDHistory()&&await i()}catch(r){console.error("BDライブラリ視聴履歴の全削除に失敗しました:",r)}}}});export{D as u};
