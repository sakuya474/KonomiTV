import{A as q,q as ye,s as K,x as D,y as pe,z as re,B as J,C as he,D as we,E as ne,G as ke,H as Se,I as Ee,J as De,K as Ce,L as Te,N as xe,O as de,Q as ve,S as Pe,T as Ve,W as Me,X as Be,Y as Ge,Z as X,$ as He,a0 as $e,a1 as Ie,a2 as Re,a3 as Le,a4 as Ne,a5 as Ye,a6 as ze,a7 as Oe,a8 as We,a9 as Ae,aa as Fe,a as r,ab as oe,ac as Xe,ad as je,ae as qe,F as R,af as _e,d as Ue,ag as Ze,ah as Je,c as p,b as i,f as U,g as N,h as b,ai as $,V as z,aj as Ke,e as O,l as H,t as P,k as te,ak as ae,al as le,o as m,_ as Qe}from"./index-CXDo8RiN.js";import{R as et}from"./Reservations-Dr71CSZD.js";import{H as tt,N as at}from"./Navigation-QrN98pcO.js";import{S as nt}from"./SPHeaderBar-DW1l1_EO.js";import{u as lt,m as st,a as ot}from"./VOverlay-B2e8aeb0.js";import{u as rt}from"./ssrBoot-Dtvu6cBu.js";import{V as it}from"./VTooltip-CWsCtJMb.js";import{V as ut,a as ct,b as fe,c as dt,d as vt}from"./VCard-BM0nYf_3.js";import{V as ft}from"./VDivider-DY8gZwUt.js";import{V as mt}from"./VSpacer-Bm2Tn-jk.js";import"./forwardRefs-DboJVnh3.js";let se=class{static async fetchTimetable(n,o){const V=await q.get("/timetable",{params:{start_time:n.toISOString(),end_time:o.toISOString()}});return V.type==="error"?(q.showGenericError(V,"番組表の情報を取得できませんでした。"),null):V.data}static async updateEPG(){const n=await q.post("/timetable/update-epg");return n.type==="error"?(q.showGenericError(n,"EPG の取得に失敗しました。"),!1):!0}static async reloadEPG(){const n=await q.post("/timetable/reload-epg");return n.type==="error"?(q.showGenericError(n,"EPG の再読み込みに失敗しました。"),!1):!0}};const gt=ye("timetable",{state:()=>({_timetable_channels:null,current_date:new Date,selected_channel_type:"ALL",is_loading:!1}),getters:{timetable_channels(e){return e._timetable_channels?e.selected_channel_type==="ALL"?e._timetable_channels:e._timetable_channels.filter(n=>n.channel.type===e.selected_channel_type):null}},actions:{async fetchTimetable(){if(this.is_loading)return;this.is_loading=!0;const e=new Date(this.current_date);e.setHours(4,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);try{const o=await se.fetchTimetable(e,n);this._timetable_channels=o}catch(o){console.error(o),this._timetable_channels=null}finally{this.is_loading=!1}},setPreviousDate(){const e=new Date(this.current_date);e.setDate(e.getDate()-1),this.current_date=e,this.fetchTimetable()},setNextDate(){const e=new Date(this.current_date);e.setDate(e.getDate()+1),this.current_date=e,this.fetchTimetable()},setCurrentDate(){this.current_date=new Date,this.fetchTimetable()},setChannelType(e){this.selected_channel_type=e},async updateEPG(){if(!this.is_loading){this.is_loading=!0;try{if(!await se.updateEPG())throw new Error("EPGの取得に失敗しました。");await this.fetchTimetable()}catch(e){throw console.error("EPG 取得エラー:",e),e}finally{this.is_loading=!1}}},async reloadEPG(){if(!this.is_loading){this.is_loading=!0;try{if(!await se.reloadEPG())throw new Error("EPGの再読み込みに失敗しました。");await this.fetchTimetable()}catch(e){throw console.error("EPG再読み込みエラー:",e),e}finally{this.is_loading=!1}}}}});function ht(e){let{rootEl:n,isSticky:o,layoutItemStyles:V}=e;const l=K(!1),g=K(0),u=D(()=>{const M=typeof l.value=="boolean"?"top":l.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,l.value?{[M]:pe(g.value)}:{top:V.value.top}]});re(()=>{J(o,M=>{M?window.addEventListener("scroll",E,{passive:!0}):window.removeEventListener("scroll",E)},{immediate:!0})}),he(()=>{window.removeEventListener("scroll",E)});let C=0;function E(){const M=C>window.scrollY?"up":"down",y=n.value.getBoundingClientRect(),w=parseFloat(V.value.top??0),k=window.scrollY-Math.max(0,g.value-w),S=y.height+Math.max(g.value,w)-window.scrollY-window.innerHeight,T=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;y.height<window.innerHeight-w?(l.value="top",g.value=w):M==="up"&&l.value==="bottom"||M==="down"&&l.value==="top"?(g.value=window.scrollY+y.top-T,l.value=!0):M==="down"&&S<=0?(g.value=0,l.value="bottom"):M==="up"&&k<=0&&(T?l.value!=="top"&&(g.value=-k+T+w,l.value="top"):(g.value=y.top+k,l.value="top")),C=window.scrollY}return{isStuck:l,stickyStyles:u}}const _t=100,bt=20;function me(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function ge(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const V=me(n),l=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);n+=(l-V)*Math.abs(l),o===e.length-1&&(n*=.5)}return me(n)*1e3}function yt(){const e={};function n(l){Array.from(l.changedTouches).forEach(g=>{(e[g.identifier]??(e[g.identifier]=new we(bt))).push([l.timeStamp,g])})}function o(l){Array.from(l.changedTouches).forEach(g=>{delete e[g.identifier]})}function V(l){var M;const g=(M=e[l])==null?void 0:M.values().reverse();if(!g)throw new Error(`No samples for touch id ${l}`);const u=g[0],C=[],E=[];for(const y of g){if(u[0]-y[0]>_t)break;C.push({t:y[0],d:y[1].clientX}),E.push({t:y[0],d:y[1].clientY})}return{x:ge(C),y:ge(E),get direction(){const{x:y,y:w}=this,[k,S]=[Math.abs(y),Math.abs(w)];return k>S&&y>=0?"right":k>S&&y<=0?"left":S>k&&w>=0?"down":S>k&&w<=0?"up":pt()}}}return{addMovement:n,endTouch:o,getVelocity:V}}function pt(){throw new Error}function wt(e){let{el:n,isActive:o,isTemporary:V,width:l,touchless:g,position:u}=e;re(()=>{window.addEventListener("touchstart",I,{passive:!0}),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",j,{passive:!0})}),he(()=>{window.removeEventListener("touchstart",I),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",j)});const C=D(()=>["left","right"].includes(u.value)),{addMovement:E,endTouch:M,getVelocity:y}=yt();let w=!1;const k=K(!1),S=K(0),T=K(0);let B;function W(c,d){return(u.value==="left"?c:u.value==="right"?document.documentElement.clientWidth-c:u.value==="top"?c:u.value==="bottom"?document.documentElement.clientHeight-c:Z())-(d?l.value:0)}function A(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const v=u.value==="left"?(c-T.value)/l.value:u.value==="right"?(document.documentElement.clientWidth-c-T.value)/l.value:u.value==="top"?(c-T.value)/l.value:u.value==="bottom"?(document.documentElement.clientHeight-c-T.value)/l.value:Z();return d?Math.max(0,Math.min(1,v)):v}function I(c){if(g.value)return;const d=c.changedTouches[0].clientX,v=c.changedTouches[0].clientY,f=25,a=u.value==="left"?d<f:u.value==="right"?d>document.documentElement.clientWidth-f:u.value==="top"?v<f:u.value==="bottom"?v>document.documentElement.clientHeight-f:Z(),t=o.value&&(u.value==="left"?d<l.value:u.value==="right"?d>document.documentElement.clientWidth-l.value:u.value==="top"?v<l.value:u.value==="bottom"?v>document.documentElement.clientHeight-l.value:Z());(a||t||o.value&&V.value)&&(B=[d,v],T.value=W(C.value?d:v,o.value),S.value=A(C.value?d:v),w=T.value>-20&&T.value<80,M(c),E(c))}function _(c){const d=c.changedTouches[0].clientX,v=c.changedTouches[0].clientY;if(w){if(!c.cancelable){w=!1;return}const a=Math.abs(d-B[0]),t=Math.abs(v-B[1]);(C.value?a>t&&a>3:t>a&&t>3)?(k.value=!0,w=!1):(C.value?t:a)>3&&(w=!1)}if(!k.value)return;c.preventDefault(),E(c);const f=A(C.value?d:v,!1);S.value=Math.max(0,Math.min(1,f)),f>1?T.value=W(C.value?d:v,!0):f<0&&(T.value=W(C.value?d:v,!1))}function j(c){if(w=!1,!k.value)return;E(c),k.value=!1;const d=y(c.changedTouches[0].identifier),v=Math.abs(d.x),f=Math.abs(d.y);(C.value?v>f&&v>400:f>v&&f>3)?o.value=d.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||Z()):o.value=S.value>.5}const L=D(()=>k.value?{transform:u.value==="left"?`translateX(calc(-100% + ${S.value*l.value}px))`:u.value==="right"?`translateX(calc(100% - ${S.value*l.value}px))`:u.value==="top"?`translateY(calc(-100% + ${S.value*l.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${S.value*l.value}px))`:Z(),transition:"none"}:void 0);return ne(k,()=>{var v,f;const c=((v=n.value)==null?void 0:v.style.transform)??null,d=((f=n.value)==null?void 0:f.style.transition)??null;ke(()=>{var a,t,s,x;(t=n.value)==null||t.style.setProperty("transform",((a=L.value)==null?void 0:a.transform)||"none"),(x=n.value)==null||x.style.setProperty("transition",((s=L.value)==null?void 0:s.transition)||null)}),Se(()=>{var a,t;(a=n.value)==null||a.style.setProperty("transform",c),(t=n.value)==null||t.style.setProperty("transition",d)})}),{isDragging:k,dragProgress:S,dragStyles:L}}function Z(){throw new Error}const kt=["start","end","left","right","top","bottom"],St=De({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>kt.includes(e)},sticky:Boolean,...Fe(),...Ae(),...st(),...We({mobile:null}),...Oe(),...ze(),...Ye(),...Ne({tag:"nav"}),...Le()},"VNavigationDrawer"),Et=Ee()({name:"VNavigationDrawer",props:St(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:o,emit:V,slots:l}=n;const{isRtl:g}=Ce(),{themeClasses:u}=Te(e),{borderClasses:C}=xe(e),{backgroundColorClasses:E,backgroundColorStyles:M}=de(ve(e,"color")),{elevationClasses:y}=Pe(e),{displayClasses:w,mobile:k}=Ve(e),{roundedClasses:S}=Me(e),T=Be(),B=Ge(e,"modelValue",null,G=>!!G),{ssrBootStyles:W}=rt(),{scopeId:A}=lt(),I=X(),_=K(!1),{runOpenDelay:j,runCloseDelay:L}=ot(e,G=>{_.value=G}),c=D(()=>e.rail&&e.expandOnHover&&_.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),d=D(()=>He(e.location,g.value)),v=D(()=>e.persistent),f=D(()=>!e.permanent&&(k.value||e.temporary)),a=D(()=>e.sticky&&!f.value&&d.value!=="bottom");ne(()=>e.expandOnHover&&e.rail!=null,()=>{J(_,G=>V("update:rail",!G))}),ne(()=>!e.disableResizeWatcher,()=>{J(f,G=>!e.permanent&&_e(()=>B.value=!G))}),ne(()=>!e.disableRouteWatcher&&!!T,()=>{J(T.currentRoute,()=>f.value&&(B.value=!1))}),J(()=>e.permanent,G=>{G&&(B.value=!0)}),e.modelValue==null&&!f.value&&(B.value=e.permanent||!k.value);const{isDragging:t,dragProgress:s}=wt({el:I,isActive:B,isTemporary:f,width:c,touchless:ve(e,"touchless"),position:d}),x=D(()=>{const G=f.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):c.value;return t.value?G*s.value:G}),{layoutItemStyles:h,layoutItemScrimStyles:Y}=$e({id:e.name,order:D(()=>parseInt(e.order,10)),position:d,layoutSize:x,elementSize:c,active:D(()=>B.value||t.value),disableTransitions:D(()=>t.value),absolute:D(()=>e.absolute||a.value&&typeof F.value!="string")}),{isStuck:F,stickyStyles:Q}=ht({rootEl:I,isSticky:a,layoutItemStyles:h}),ee=de(D(()=>typeof e.scrim=="string"?e.scrim:null)),be=D(()=>({...t.value?{opacity:s.value*.2,transition:"none"}:void 0,...Y.value}));return Ie({VList:{bgColor:"transparent"}}),Re(()=>{const G=l.image||e.image;return r(R,null,[r(e.tag,oe({ref:I,onMouseenter:j,onMouseleave:L,class:["v-navigation-drawer",`v-navigation-drawer--${d.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":_.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":f.value,"v-navigation-drawer--persistent":v.value,"v-navigation-drawer--active":B.value,"v-navigation-drawer--sticky":a.value},u.value,E.value,C.value,w.value,y.value,S.value,e.class],style:[M.value,h.value,W.value,Q.value,e.style]},A,o),{default:()=>{var ie,ue,ce;return[G&&r("div",{key:"image",class:"v-navigation-drawer__img"},[l.image?r(je,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},l.image):r(Xe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),l.prepend&&r("div",{class:"v-navigation-drawer__prepend"},[(ie=l.prepend)==null?void 0:ie.call(l)]),r("div",{class:"v-navigation-drawer__content"},[(ue=l.default)==null?void 0:ue.call(l)]),l.append&&r("div",{class:"v-navigation-drawer__append"},[(ce=l.append)==null?void 0:ce.call(l)])]}}),r(qe,{name:"fade-transition"},{default:()=>[f.value&&(t.value||B.value)&&!!e.scrim&&r("div",oe({class:["v-navigation-drawer__scrim",ee.backgroundColorClasses.value],style:[be.value,ee.backgroundColorStyles.value],onClick:()=>{v.value||(B.value=!1)}},A),null)]})])}),{isStuck:F}}}),Dt={class:"route-container"},Ct={class:"timetable-container-wrapper"},Tt={class:"timetable-header"},xt={class:"channels-tab"},Pt={class:"timetable-header__date-control"},Vt={class:"timetable-body"},Mt={key:0,class:"loading-container"},Bt={key:1,class:"timetable-grid-container"},Gt={class:"timeline-container"},Ht={class:"hour-text"},$t=["onClick"],It={class:"program-header"},Rt={class:"program-title"},Lt={class:"program-badges"},Nt={key:0,class:"program-badge program-badge--paid"},Yt={key:1,class:"program-badge program-badge--genre"},zt={key:0,class:"program-description"},Ot={class:"program-time"},Wt={class:"tooltip-text"},At={key:2,class:"loading-container"},Ft={class:"epg-controls-floating"},Xt={class:"program-info-badges"},jt={class:"text-body-2 mb-3"},qt={key:0,class:"program-detail-section"},Ut={class:"program-detail-grid"},Zt={class:"detail-key"},Jt={class:"detail-value"},Kt=Ue({__name:"Timetable",setup(e){const n=gt(),o=Ze(),V=[{id:"ALL",name:"すべて"},{id:"GR",name:"地デジ"},{id:"BS",name:"BS"},{id:"CS",name:"CS"}],l=X(0),g=(a,t)=>{n.setChannelType(a),l.value=t},u={"ニュース・報道":{background:"#5a88a7",text:"#ffffff"},スポーツ:{background:"#e07f5a",text:"#ffffff"},"情報・ワイドショー":{background:"#e7a355",text:"#ffffff"},ドラマ:{background:"#b464a8",text:"#ffffff"},音楽:{background:"#64b46e",text:"#ffffff"},バラエティ:{background:"#e05a8e",text:"#ffffff"},映画:{background:"#a7647e",text:"#ffffff"},"アニメ・特撮":{background:"#e76b55",text:"#ffffff"},"ドキュメンタリー・教養":{background:"#5a88a7",text:"#ffffff"},"劇場・公演":{background:"#a7647e",text:"#ffffff"},"趣味・教育":{background:"#64b46e",text:"#ffffff"},福祉:{background:"#5aa788",text:"#ffffff"},その他:{background:"#7f7f7f",text:"#ffffff"}},C={background:"rgb(var(--v-theme-background-lighten-3))",text:"rgb(var(--v-theme-text))"},E=X(new Date),M=setInterval(()=>{E.value=new Date},60*1e3);Je(()=>{clearInterval(M)}),D(()=>{const a=n.current_date,t=a.getFullYear(),s=a.getMonth()+1,x=a.getDate(),h=["日","月","火","水","木","金","土"][a.getDay()];return`${t}年${s}月${x}日 (${h})`});const y=a=>{const t=new Date(a);return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},w=a=>{const t=new Date(a);return`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} ${y(a)}`},k=(a,t)=>a.length<=t?a:a.substring(0,t)+"...",S=D(()=>{var a;return{"grid-template-columns":`repeat(${((a=n.timetable_channels)==null?void 0:a.length)||0}, minmax(200px, 1fr))`}}),T=(a,t)=>{var ee;const s=new Date(a.start_time),x=(s.getHours()-4+24)%24*60+s.getMinutes(),h=a.duration/60,Y=((ee=a.genres[0])==null?void 0:ee.major)||"その他",F=u[Y]||C,Q={"grid-column":t+1,"grid-row-start":x+1,"grid-row-end":x+h+1,"background-color":F.background,color:F.text,"border-color":F.background};return new Date(a.end_time)<E.value&&(Q.opacity=.6,Q["pointer-events"]="none"),Q},B=D(()=>{const a=new Date,t=n.current_date;return a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()&&a.getDate()===t.getDate()}),W=D(()=>({top:`${((E.value.getHours()-4+24)%24*60+E.value.getMinutes())*6}px`})),A=a=>a.duration/60>15,I=X(!1),_=X(null),j=a=>{_.value=a,I.value=!0},L=X(!1),c=async a=>{L.value=!0;const t={is_enabled:!0,priority:3,recording_folders:[],recording_start_margin:null,recording_end_margin:null,recording_mode:"SpecifiedService",caption_recording_mode:"Default",data_broadcasting_recording_mode:"Default",post_recording_mode:"Default",post_recording_bat_file_path:null,is_event_relay_follow_enabled:!0,is_exact_recording_enabled:!1,is_oneseg_separate_output_enabled:!1,is_sequential_recording_in_single_file_enabled:!1,forced_tuner_id:null};await et.addReservation(a,t)?(o.show("success","録画予約を追加しました。"),I.value=!1):o.show("error","録画予約の追加に失敗しました。"),L.value=!1},d=async()=>{try{await n.updateEPG(),o.show("success","EPG 取得を開始しました。")}catch(a){o.show("error","EPG 取得に失敗しました。EDCBが起動していることを確認してください。"),console.error("EPG 取得エラー:",a)}},v=async()=>{try{await n.reloadEPG(),o.show("success","EPG を再読み込みしました。")}catch(a){o.show("error","EPG の再読み込みに失敗しました。EDCBが起動していることを確認してください。"),console.error("EPG再読み込みエラー:",a)}};re(()=>{n.fetchTimetable()});const f=X(!0);return J(()=>n.timetable_channels,a=>{f.value&&a&&a.length>0&&_e(()=>{const t=document.querySelector(".timetable-grid-container");if(!t)return;const s=E.value.getHours(),x=E.value.getMinutes(),Y=((s-4+24-1)%24*60+x)*2-50;t.scrollTo({top:Y>0?Y:0,behavior:"smooth"}),f.value=!1})}),(a,t)=>(m(),p("div",Dt,[r(tt),i("main",null,[r(at),i("div",Ct,[r(nt),i("div",Tt,[i("div",xt,[i("div",{class:"channels-tab__buttons",style:U({"--tab-length":V.length,"--active-tab-index":l.value})},[(m(),p(R,null,N(V,(s,x)=>r(z,{variant:"flat",class:"channels-tab__button",key:s.id,onClick:h=>g(s.id,x)},{default:b(()=>[H(P(s.name),1)]),_:2},1032,["onClick"])),64)),t[3]||(t[3]=i("div",{class:"channels-tab__highlight"},null,-1))],4)]),i("div",Pt,[r(z,{onClick:$(n).setPreviousDate,class:"mr-2"},{default:b(()=>[...t[4]||(t[4]=[H("昨日",-1)])]),_:1},8,["onClick"]),r(z,{onClick:$(n).setCurrentDate,class:"mx-2"},{default:b(()=>[...t[5]||(t[5]=[H("今日",-1)])]),_:1},8,["onClick"]),r(z,{onClick:$(n).setNextDate,class:"ml-2"},{default:b(()=>[...t[6]||(t[6]=[H("明日",-1)])]),_:1},8,["onClick"])])]),i("div",Vt,[$(n).is_loading?(m(),p("div",Mt,[r(Ke,{indeterminate:"",size:"64"})])):$(n).timetable_channels&&$(n).timetable_channels.length>0?(m(),p("div",Bt,[t[7]||(t[7]=i("div",{class:"corner-cell"},null,-1)),i("div",{class:"channels-header",style:U(S.value)},[(m(!0),p(R,null,N($(n).timetable_channels,s=>(m(),p("div",{key:s.channel.id,class:"channel-header-cell"},P(s.channel.name),1))),128))],4),i("div",Gt,[(m(),p(R,null,N(25,s=>i("div",{key:s,class:"hour-label"},[i("span",Ht,P((s+3)%24),1)])),64))]),i("div",{class:"programs-grid",style:U(S.value)},[B.value?(m(),p("div",{key:0,class:"current-time-line",style:U(W.value)},null,4)):O("",!0),(m(!0),p(R,null,N($(n).timetable_channels.length,s=>(m(),p("div",{key:s,class:"channel-border",style:U({gridColumn:s})},null,4))),128)),(m(),p(R,null,N(24,s=>i("div",{key:s,class:"hour-border",style:U({gridRow:s*60+1})},null,4)),64)),(m(!0),p(R,null,N($(n).timetable_channels,(s,x)=>(m(),p(R,null,[(m(!0),p(R,null,N(s.programs,h=>(m(),te(it,{key:h.id,location:"top",disabled:A(h)},{activator:b(({props:Y})=>[i("div",oe({ref_for:!0},Y,{class:"program-cell elevation-2",style:T(h,x),onClick:F=>j(h)}),[i("div",It,[i("div",Rt,P(h.title),1),i("div",Lt,[h.is_free?O("",!0):(m(),p("span",Nt,"有料")),h.genres.length>0?(m(),p("span",Yt,P(h.genres[0].major),1)):O("",!0)])]),h.description&&h.duration>=900?(m(),p("div",zt,P(k(h.description,50)),1)):O("",!0),i("div",Ot,P(y(h.start_time))+" - "+P(y(h.end_time))+" ("+P(Math.floor(h.duration/60))+"分)",1)],16,$t)]),default:b(()=>[i("span",Wt,P(h.title),1)]),_:2},1032,["disabled"]))),128))],64))),256))],4)])):(m(),p("div",At,[...t[8]||(t[8]=[i("p",null,"番組情報を取得できませんでした。",-1),i("p",null,"指定された期間・チャンネルに放送される番組がありません。",-1)])]))])])]),i("div",Ft,[r(z,{onClick:d,loading:$(n).is_loading,disabled:$(n).is_loading,color:"primary",variant:"tonal",size:"large",class:"epg-btn"},{default:b(()=>[r(ae,{icon:"mdi-download",class:"mr-1",size:"large"}),t[9]||(t[9]=i("span",null,"EPG取得",-1))]),_:1},8,["loading","disabled"]),r(z,{onClick:v,loading:$(n).is_loading,disabled:$(n).is_loading,color:"secondary",variant:"tonal",size:"large",class:"epg-btn"},{default:b(()=>[r(ae,{icon:"mdi-refresh",class:"mr-1",size:"large"}),t[10]||(t[10]=i("span",null,"EPG再読み込み",-1))]),_:1},8,["loading","disabled"])]),r(Et,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=s=>I.value=s),location:"right",temporary:"",width:"600"},{default:b(()=>[_.value?(m(),te(vt,{key:0,class:"detail-panel"},{default:b(()=>[r(ut,{class:"text-h5 pb-2"},{default:b(()=>[H(P(_.value.title),1)]),_:1}),r(ct,{class:"pb-3"},{default:b(()=>[H(P(w(_.value.start_time))+" - "+P(w(_.value.end_time))+" ("+P(Math.floor(_.value.duration/60))+"分)",1)]),_:1}),r(fe,{class:"pt-0 pb-2"},{default:b(()=>[i("div",Xt,[_.value.is_free?O("",!0):(m(),te(le,{key:0,color:"warning",size:"small",class:"mr-2 mb-2"},{default:b(()=>[r(ae,{start:""},{default:b(()=>[...t[11]||(t[11]=[H("mdi-currency-yen",-1)])]),_:1}),t[12]||(t[12]=H(" 有料放送 ",-1))]),_:1})),_.value.video_resolution==="1080i"||_.value.video_resolution==="1080p"?(m(),te(le,{key:1,color:"success",size:"small",class:"mr-2 mb-2"},{default:b(()=>[r(ae,{start:""},{default:b(()=>[...t[13]||(t[13]=[H("mdi-high-definition",-1)])]),_:1}),t[14]||(t[14]=H(" HD ",-1))]),_:1})):O("",!0),(m(!0),p(R,null,N(_.value.genres.slice(0,2),s=>(m(),te(le,{key:s.major,color:"primary",variant:"outlined",size:"small",class:"mr-2 mb-2"},{default:b(()=>[H(P(s.major),1)]),_:2},1024))),128))])]),_:1}),r(fe,{class:"py-2"},{default:b(()=>[r(ft,{class:"mb-3"}),t[16]||(t[16]=i("h4",{class:"text-subtitle-1 mb-2"},"番組内容",-1)),i("p",jt,P(_.value.description),1),_.value.detail&&Object.keys(_.value.detail).length>0?(m(),p("div",qt,[t[15]||(t[15]=i("h4",{class:"text-subtitle-1 mb-2"},"詳細情報",-1)),i("div",Ut,[(m(!0),p(R,null,N(_.value.detail,(s,x)=>(m(),p("div",{key:x,class:"detail-item"},[i("span",Zt,P(x)+":",1),i("span",Jt,P(s),1)]))),128))])])):O("",!0)]),_:1}),r(dt,{class:"detail-panel__actions"},{default:b(()=>[r(mt),r(z,{loading:L.value,onClick:t[0]||(t[0]=s=>c(_.value.id)),color:"primary",variant:"elevated"},{default:b(()=>[r(ae,{start:""},{default:b(()=>[...t[17]||(t[17]=[H("mdi-record-rec",-1)])]),_:1}),t[18]||(t[18]=H(" 録画予約 ",-1))]),_:1},8,["loading"]),r(z,{onClick:t[1]||(t[1]=s=>I.value=!1),variant:"outlined"},{default:b(()=>[...t[19]||(t[19]=[H("閉じる",-1)])]),_:1})]),_:1})]),_:1})):O("",!0)]),_:1},8,["modelValue"])]))}}),da=Qe(Kt,[["__scopeId","data-v-f6570012"]]);export{da as default};
