import{i as Pe,j as Te,b as de}from"./VTextField-CKgx3ZWR.js";import{H as $,ar as ye,G as te,W as ee,q as C,a0 as le,as as Ve,a as f,a9 as O,dg as we,z as H,F as W,a7 as ke,Q as Ce,s as E,D as fe,X as z,di as Ae,E as be,c$ as oe,d8 as Re,ac as Se,de as ie,dj as De,aA as Be,N as Fe,B as Oe,y as Ee,x as Z,aI as _e,aE as Le,cY as Me,dk as ue,dl as ve,dm as me,ah as he,dn as He,aa as qe,l as Ue}from"./index-Cat5FXVK.js";import{f as Ne}from"./forwardRefs-DboJVnh3.js";import{u as ze,m as $e,V as Ke,a as je,b as pe}from"./VMenu-BdgALB6N.js";import{m as We}from"./transition-3mmQQU9L.js";import{g as Xe,e as Ye}from"./dialog-transition-CobOhznJ.js";import{m as Ge,V as ge}from"./VSelectionControl-TheHVKhX.js";import{a as Qe}from"./VAvatar-DZjadIb6.js";import{V as Je}from"./VChip-CC0_c7wt.js";const Ze=$({indeterminate:Boolean,indeterminateIcon:{type:ye,default:"$checkboxIndeterminate"},...Ge({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),et=te()({name:"VCheckboxBtn",props:Ze(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,c){let{slots:n}=c;const i=ee(e,"indeterminate"),o=ee(e,"modelValue");function v(a){i.value&&(i.value=!1)}const m=C(()=>i.value?e.indeterminateIcon:e.falseIcon),u=C(()=>i.value?e.indeterminateIcon:e.trueIcon);return le(()=>{const a=Ve(ge.filterProps(e),["modelValue"]);return f(ge,O(a,{modelValue:o.value,"onUpdate:modelValue":[h=>o.value=h,v],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:m.value,trueIcon:u.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}}),tt=$({renderless:Boolean,...ke()},"VVirtualScrollItem"),lt=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:tt(),emits:{"update:height":e=>!0},setup(e,c){let{attrs:n,emit:i,slots:o}=c;const{resizeRef:v,contentRect:m}=we(void 0,"border");H(()=>{var u;return(u=m.value)==null?void 0:u.height},u=>{u!=null&&i("update:height",u)}),le(()=>{var u,a;return e.renderless?f(W,null,[(u=o.default)==null?void 0:u.call(o,{itemRef:v})]):f("div",O({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(a=o.default)==null?void 0:a.call(o)])})}}),nt=-1,at=1,se=100,ot=$({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function ut(e,c){const n=Ce(),i=E(0);fe(()=>{i.value=parseFloat(e.itemHeight||0)});const o=E(0),v=E(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),m=E(0),u=E(0),a=z(),h=z();let R=0;const{resizeRef:F,contentRect:r}=we();fe(()=>{F.value=a.value});const w=C(()=>{var t;return a.value===document.documentElement?n.height.value:((t=r.value)==null?void 0:t.height)||parseInt(e.height)||0}),_=C(()=>!!(a.value&&h.value&&w.value&&i.value));let T=Array.from({length:c.value.length}),p=Array.from({length:c.value.length});const k=E(0);let S=-1;function L(t){return T[t]||i.value}const A=Ae(()=>{const t=performance.now();p[0]=0;const s=c.value.length;for(let y=1;y<=s-1;y++)p[y]=(p[y-1]||0)+L(y-1);k.value=Math.max(k.value,performance.now()-t)},k),X=H(_,t=>{t&&(X(),R=h.value.offsetTop,A.immediate(),D(),~S&&Se(()=>{ie&&window.requestAnimationFrame(()=>{J(S),S=-1})}))});be(()=>{A.clear()});function ne(t,s){const y=T[t],V=i.value;i.value=V?Math.min(i.value,s):s,(y!==s||V!==i.value)&&(T[t]=s,A())}function I(t){return t=oe(t,0,c.value.length-1),p[t]||0}function Y(t){return st(p,t)}let q=0,M=0,K=0;H(w,(t,s)=>{s&&(D(),t<s&&requestAnimationFrame(()=>{M=0,D()}))});let U=-1;function N(){if(!a.value||!h.value)return;const t=a.value.scrollTop,s=performance.now();s-K>500?(M=Math.sign(t-q),R=h.value.offsetTop):M=t-q,q=t,K=s,window.clearTimeout(U),U=window.setTimeout(G,500),D()}function G(){!a.value||!h.value||(M=0,K=0,window.clearTimeout(U),D())}let Q=-1;function D(){cancelAnimationFrame(Q),Q=requestAnimationFrame(ae)}function ae(){if(!a.value||!w.value)return;const t=q-R,s=Math.sign(M),y=Math.max(0,t-se),V=oe(Y(y),0,c.value.length),d=t+w.value+se,g=oe(Y(d)+1,V+1,c.value.length);if((s!==nt||V<o.value)&&(s!==at||g>v.value)){const b=I(o.value)-I(V),B=I(g)-I(v.value);Math.max(b,B)>se?(o.value=V,v.value=g):(V<=0&&(o.value=V),g>=c.value.length&&(v.value=g))}m.value=I(o.value),u.value=I(c.value.length)-I(v.value)}function J(t){const s=I(t);!a.value||t&&!s?S=t:a.value.scrollTop=s}const l=C(()=>c.value.slice(o.value,v.value).map((t,s)=>({raw:t,index:s+o.value,key:Re(t)&&"value"in t?t.value:s+o.value})));return H(c,()=>{T=Array.from({length:c.value.length}),p=Array.from({length:c.value.length}),A.immediate(),D()},{deep:!0}),{calculateVisibleItems:D,containerRef:a,markerRef:h,computedItems:l,paddingTop:m,paddingBottom:u,scrollToIndex:J,handleScroll:N,handleScrollend:G,handleItemResize:ne}}function st(e,c){let n=e.length-1,i=0,o=0,v=null,m=-1;if(e[n]<c)return n;for(;i<=n;)if(o=i+n>>1,v=e[o],v>c)n=o-1;else if(v<c)m=o,i=o+1;else return v===c?o:i;return m}const it=$({items:{type:Array,default:()=>[]},renderless:Boolean,...ot(),...ke(),..._e()},"VVirtualScroll"),rt=te()({name:"VVirtualScroll",props:it(),setup(e,c){let{slots:n}=c;const i=De("VVirtualScroll"),{dimensionStyles:o}=Be(e),{calculateVisibleItems:v,containerRef:m,markerRef:u,handleScroll:a,handleScrollend:h,handleItemResize:R,scrollToIndex:F,paddingTop:r,paddingBottom:w,computedItems:_}=ut(e,Fe(e,"items"));return Oe(()=>e.renderless,()=>{function T(){var S,L;const k=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[k]("scroll",a,{passive:!0}),document[k]("scrollend",h)):((S=m.value)==null||S[k]("scroll",a,{passive:!0}),(L=m.value)==null||L[k]("scrollend",h))}Ee(()=>{m.value=Xe(i.vnode.el,!0),T(!0)}),be(T)}),le(()=>{const T=_.value.map(p=>f(lt,{key:p.key,renderless:e.renderless,"onUpdate:height":k=>R(p.index,k)},{default:k=>{var S;return(S=n.default)==null?void 0:S.call(n,{item:p.raw,index:p.index,...k})}}));return e.renderless?f(W,null,[f("div",{ref:u,class:"v-virtual-scroll__spacer",style:{paddingTop:Z(r.value)}},null),T,f("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Z(w.value)}},null)]):f("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:a,onScrollend:h,style:[o.value,e.style]},[f("div",{ref:u,class:"v-virtual-scroll__container",style:{paddingTop:Z(r.value),paddingBottom:Z(w.value)}},[T])])}),{calculateVisibleItems:v,scrollToIndex:F}}});function ct(e,c){const n=E(!1);let i;function o(u){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function v(){await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>{if(n.value){const a=H(n,()=>{a(),u()})}else u()})}async function m(u){var R,F;if(u.key==="Tab"&&((R=c.value)==null||R.focus()),!["PageDown","PageUp","Home","End"].includes(u.key))return;const a=(F=e.value)==null?void 0:F.$el;if(!a)return;(u.key==="Home"||u.key==="End")&&a.scrollTo({top:u.key==="Home"?0:a.scrollHeight,behavior:"smooth"}),await v();const h=a.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(u.key==="PageDown"||u.key==="Home"){const r=a.getBoundingClientRect().top;for(const w of h)if(w.getBoundingClientRect().top>=r){w.focus();break}}else{const r=a.getBoundingClientRect().bottom;for(const w of[...h].reverse())if(w.getBoundingClientRect().bottom<=r){w.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const dt=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ye,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...$e({itemChildren:!1})},"Select"),ft=$({...dt(),...Ve(Te({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...We({transition:{component:Ye}})},"VSelect"),bt=te()({name:"VSelect",props:ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,c){let{slots:n}=c;const{t:i}=Le(),o=z(),v=z(),m=z(),u=ee(e,"menu"),a=C({get:()=>u.value,set:l=>{var t;u.value&&!l&&((t=v.value)!=null&&t.Î¨openChildren.size)||(u.value=l)}}),{items:h,transformIn:R,transformOut:F}=ze(e),r=ee(e,"modelValue",[],l=>R(l===null?[null]:Me(l)),l=>{const t=F(l);return e.multiple?t:t[0]??null}),w=C(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),_=Pe(e),T=C(()=>r.value.map(l=>l.value)),p=E(!1),k=C(()=>a.value?e.closeText:e.openText);let S="",L;const A=C(()=>e.hideSelected?h.value.filter(l=>!r.value.some(t=>(e.valueComparator||ue)(t,l))):h.value),X=C(()=>e.hideNoData&&!A.value.length||_.isReadonly.value||_.isDisabled.value),ne=C(()=>{var l;return{...e.menuProps,activatorProps:{...((l=e.menuProps)==null?void 0:l.activatorProps)||{},"aria-haspopup":"listbox"}}}),I=z(),Y=ct(I,o);function q(l){e.openOnClear&&(a.value=!0)}function M(){X.value||(a.value=!a.value)}function K(l){ve(l)&&U(l)}function U(l){var V,d;if(!l.key||_.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(a.value=!0),["Escape","Tab"].includes(l.key)&&(a.value=!1),l.key==="Home"?(V=I.value)==null||V.focus("first"):l.key==="End"&&((d=I.value)==null||d.focus("last"));const t=1e3;if(!ve(l))return;const s=performance.now();s-L>t&&(S=""),S+=l.key.toLowerCase(),L=s;const y=h.value.find(g=>g.title.toLowerCase().startsWith(S));if(y!==void 0){r.value=[y];const g=A.value.indexOf(y);ie&&window.requestAnimationFrame(()=>{var b;g>=0&&((b=m.value)==null||b.scrollToIndex(g))})}}function N(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const s=r.value.findIndex(V=>(e.valueComparator||ue)(V.value,l.value)),y=t??!~s;if(~s){const V=y?[...r.value,l]:[...r.value];V.splice(s,1),r.value=V}else y&&(r.value=[...r.value,l])}else{const s=t!==!1;r.value=s?[l]:[],Se(()=>{a.value=!1})}}function G(l){var t;(t=I.value)!=null&&t.$el.contains(l.relatedTarget)||(a.value=!1)}function Q(){var l;e.eager&&((l=m.value)==null||l.calculateVisibleItems())}function D(){var l;p.value&&((l=o.value)==null||l.focus())}function ae(l){p.value=!0}function J(l){if(l==null)r.value=[];else if(me(o.value,":autofill")||me(o.value,":-webkit-autofill")){const t=h.value.find(s=>s.title===l);t&&N(t)}else o.value&&(o.value.value="")}return H(a,()=>{if(!e.hideSelected&&a.value&&r.value.length){const l=A.value.findIndex(t=>r.value.some(s=>(e.valueComparator||ue)(s.value,t.value)));ie&&window.requestAnimationFrame(()=>{var t;l>=0&&((t=m.value)==null||t.scrollToIndex(l))})}}),H(()=>e.items,(l,t)=>{a.value||p.value&&!t.length&&l.length&&(a.value=!0)}),le(()=>{const l=!!(e.chips||n.chip),t=!!(!e.hideNoData||A.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),s=r.value.length>0,y=de.filterProps(e),V=s||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(de,O({ref:o},y,{modelValue:r.value.map(d=>d.props.value).join(", "),"onUpdate:modelValue":J,focused:p.value,"onUpdate:focused":d=>p.value=d,validationValue:r.externalValue,counterValue:w.value,dirty:s,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:V,"onClick:clear":q,"onMousedown:control":M,onBlur:G,onKeydown:U,"aria-label":i(k.value),title:i(k.value)}),{...n,default:()=>f(W,null,[f(Ke,O({ref:v,modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,activator:"parent",contentClass:"v-select__content",disabled:X.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Q,onAfterLeave:D},ne.value),{default:()=>[t&&f(je,O({ref:I,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:K,onFocusin:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Y,e.listProps),{default:()=>{var d,g,b;return[(d=n["prepend-item"])==null?void 0:d.call(n),!A.value.length&&!e.hideNoData&&(((g=n["no-data"])==null?void 0:g.call(n))??f(pe,{key:"no-data",title:i(e.noDataText)},null)),f(rt,{ref:m,renderless:!0,items:A.value},{default:B=>{var ce;let{item:x,index:j,itemRef:P}=B;const re=O(x.props,{ref:P,key:x.value,onClick:()=>N(x,null)});return((ce=n.item)==null?void 0:ce.call(n,{item:x,index:j,props:re}))??f(pe,O(re,{role:"option"}),{prepend:Ie=>{let{isSelected:xe}=Ie;return f(W,null,[e.multiple&&!e.hideSelected?f(et,{key:x.value,modelValue:xe,ripple:!1,tabindex:"-1"},null):void 0,x.props.prependAvatar&&f(Qe,{image:x.props.prependAvatar},null),x.props.prependIcon&&f(he,{icon:x.props.prependIcon},null)])}})}}),(b=n["append-item"])==null?void 0:b.call(n)]}})]}),r.value.map((d,g)=>{function b(P){P.stopPropagation(),P.preventDefault(),N(d,!1)}const B={"onClick:close":b,onKeydown(P){P.key!=="Enter"&&P.key!==" "||(P.preventDefault(),P.stopPropagation(),b(P))},onMousedown(P){P.preventDefault(),P.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},x=l?!!n.chip:!!n.selection,j=x?He(l?n.chip({item:d,index:g,props:B}):n.selection({item:d,index:g})):void 0;if(!(x&&!j))return f("div",{key:d.value,class:"v-select__selection"},[l?n.chip?f(qe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[j]}):f(Je,O({key:"chip",closable:e.closableChips,size:"small",text:d.title,disabled:d.props.disabled},B),null):j??f("span",{class:"v-select__selection-text"},[d.title,e.multiple&&g<r.value.length-1&&f("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var B;for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return f(W,null,[(B=n["append-inner"])==null?void 0:B.call(n,...g),e.menuIcon?f(he,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ne({isFocused:p,menu:a,select:N},o)}});export{bt as V,et as a,Ze as m};
