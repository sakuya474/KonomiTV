import{d as h,ai as L,X as B,y as S,aj as v,z as g,q as w,c as D,a as o,b as l,af as s,n as H,o as q,_ as C}from"./index-PPs0Ssvj.js";import{B as M}from"./Breadcrumbs-C1wcfx-w.js";import{H as N,N as P}from"./Navigation-B4jp-Fhj.js";import{S as U}from"./SPHeaderBar-DJmZx8U5.js";import{B as x}from"./BDLibraryList-BTeJrne3.js";import{u as k}from"./BDLibraryMylistStore-C0sAQcyL.js";import{u as z}from"./BDLibraryStore-BLsF45Al.js";import{u as I}from"./BDLibraryHistoryStore-DB7_FniF.js";import"./VSpacer-DWKeWgTX.js";import"./ssrBoot-DEyOSiCA.js";import"./BDLibrary-B6Wv9L_7.js";import"./VMenu-CcU1DFc2.js";import"./index-B7FvWCdQ.js";import"./transition-CN5jgc81.js";import"./VAvatar-D79LN0fb.js";import"./VDivider-D7IHgVjN.js";import"./dialog-transition-E1okBScg.js";import"./forwardRefs-DboJVnh3.js";import"./VCard-BetW2VVL.js";import"./VDialog-B3GmWX_E.js";import"./VSelect-CYrV0-gI.js";import"./VTextField-BW0bWGXn.js";import"./VSelectionControl-D1FySW8-.js";import"./VChip-CE76iAQC.js";import"./VPagination-VeKX9LOz.js";const O={class:"route-container"},V={class:"bd-library-home-container-wrapper"},j={class:"bd-library-home-container"},E=h({__name:"Home",setup(Q){const e=z(),b=k(),m=I(),p=L(),i=v(),a=B("");S(async()=>{if(await p.fetchUser(!0),await e.fetchBDLibraryList(n),p.is_logged_in)try{await b.fetchMylistItems(),await m.fetchHistoryList()}catch{}i.query.search&&(a.value=i.query.search)}),g(()=>i.query.search,t=>{t?a.value=t:a.value=""});let n=1;const f=async t=>{n=t,await e.fetchBDLibraryList(t)},y=async t=>{},u=w(()=>{if(!a.value.trim())return e.bdList;const t=a.value.toLowerCase();return e.bdList.filter(d=>d.title.toLowerCase().includes(t)||d.path.toLowerCase().includes(t))});return(t,d)=>(q(),D("div",O,[o(N),l("main",null,[o(P),l("div",V,[o(U),l("div",j,[o(M,{crumbs:[{name:"ホーム",path:"/"},{name:"BDを見る",path:"/bd-library/",disabled:!0}]}),o(x,{class:H(["bd-library-home-container__bd-list",{"bd-library-home-container__bd-list--loading":u.value.length===0&&s(e).total===0}]),title:"BD一覧",items:u.value.map(r=>{const c=s(m).history_list.find(_=>_.bd_id===r.id);return{id:String(r.id),bd_id:r.id,title:r.title,path:r.path,added_at:r.created_at,position:c==null?void 0:c.position,duration:r.duration}}),total:s(e).total,hidePagination:!1,hideSort:!1,showMoreButton:!1,showSearch:!1,page:s(n),"onUpdate:page":f,"onUpdate:sortOrder":y},null,8,["class","items","total","page"])])])])]))}}),ut=C(E,[["__scopeId","data-v-9d2d4a45"]]);export{ut as default};
